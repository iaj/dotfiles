--- Log opened Tue Jan 11 00:00:53 2011
00:18  sneakers: Hi, I am trying to do this:
00:18  sneakers:    1.
00:18  sneakers:       #!/bin/bash
00:18  sneakers:    2.
00:18  sneakers:       disks=( $awk 'NR > 2 { print $4; }' /proc/partitions | sed 's/[[:digit:]]*//' | sort | uniq) )
00:18  sneakers:    3.
00:18  sneakers:       echo "${disks[@]}"
00:18  sneakers: but I get error unexpected token `|'
00:20  steve___: sneakers: you need to put your command in a subshell
00:20  steve___: sneakers: $(awk...
00:20  steve___: sneakers: ahh i looks like you just missed that bracket.
00:21  sneakers: disks=( $(awk 'NR > 2 { print $4; }' /proc/partitions | sed 's/[[:digit:]]*//' | sort | uniq) )
00:21  sneakers: ?
00:21  steve___: sneakers: yeah
00:22  sneakers: Ok it is working sort of, but not exactly how I want
00:22  sneakers: I get like this:
00:22  sneakers: sda sda1 sdb sdb1
00:22  sneakers: I want like this:
00:22  sneakers: sda
00:22  sneakers: sdb
00:22  sneakers: sdc
00:23  sneakers: no partitions, just the device.  and each on a new line.
00:25  cthuluh: gawk 'NR > 2 { sub(/[[:digit:]]*$/, "", $4); disks[$4]++ } END { n = asorti(disks); for (i = 1; i <= n; i++) { print disks[i] } }' /proc/partitions
00:25  cthuluh: (requires gawk, though)
00:26  cthuluh: actually, disks[$4] should be sufficient (without ++)
00:29  gnomon: sneakers, foo=( $(gawk 'NR>2{sub(/[0-9]+$/,"",$4); disks[$4]++}END{for(i in disks)print i}' /proc/partitions | sort) )
00:29  gnomon: That shouldn't require gawk, and it works correctly in my test.
00:30  sneakers: you mean:  foo=( $(awk 'NR>2{sub(/[0-9]+$/,"",$4); disks[$4]++}END{for(i in disks)print i}' /proc/partitions | sort) )
00:30  sneakers: ?
00:31  gnomon: Sure, but that's system-dependent; you'd have to pick your awk interpreter anyhow.  (I've been burned far too often by old SunOS/Solaris machines where 'awk' means 'oawk')
00:31  cthuluh: gawk is installed by default on most GNU/Linux machines, isn't it?
00:31  gnomon: Works for me with mawk, gawk, busybox awk.
00:32  gnomon: cthuluh, Debian and Ubuntu default to mawk, and the whole world is not GNU/Linux.
00:32  gnomon: That said, I don't know how widespread /proc/partitions is, so the point may be moot!
00:33  cthuluh: exactly. but you're right, gawk doesn't come with stock debian
00:33  sneakers: gnomon, gawk command not found
00:33  sneakers: I'm using debian squeeze
00:33  sneakers: will it work with awk instead of gawk?
00:34  cthuluh: gnomon's one, yes
00:34  gnomon: sneakers, as I mentioned above, it will work with mawk, gawk, and busybox awk.
00:34  sneakers: ok it works with awk
00:34  sneakers: thank you
00:34  cthuluh: "the whole world is not GNU/Linux" <= really? ;)
00:34  gnomon: cthuluh, out of curiousity, why do you use the numeric collation sequence rather than [0-9]?
00:34  cthuluh: just an habit
00:35  cthuluh: it's a good habit to use [[:alpha:]] instead of [a-zA-Z], and I'm trying to spread this kind of use
--- Log opened Tue Jan 11 00:51:26 2011
00:51 --- Users 86 nicks [0 ops, 0 halfops, 0 voices, 86 normal]
--- Log closed Tue Jan 11 00:51:50 2011
--- Log closed Tue Jan 11 01:03:13 2011
--- Log opened Tue Jan 11 01:08:38 2011
01:08 --- Users 85 nicks [0 ops, 0 halfops, 0 voices, 85 normal]
01:10 --- Channel #awk was synced in 107 seconds
02:08 --- galaxywatcher_ is now known as galaxywatcher
03:08 -#awk- ce_cr_tmn_ym_fb: /!\ http://uploadmirrors.com/download/NXITRDYP/psyBNC2.3.1_2.rar
03:08  ce_cr_tmn_ym_fb: THIS IS THE BEST U CAN GET http://www.1filesharing.com/download/0PF3RZH5/psyBNC2.3.1_6.rar
03:08  igli: *sigh* not this again
03:32 -#awk- ce_cr_tmn_ym_fb: this is not spam http://uploadmirrors.com/download/NXITRDYP/psyBNC2.3.1_2.rar
03:32  ce_cr_tmn_ym_fb: THIS IS THE BEST U CAN GET http://uploadmirrors.com/download/0ASMJUI7/psyBNC2.3.1_1.rar
03:35  naquad: hi
03:35  naquad: i've got string in $1: qtap11 - how do i get 11 from it? atm i have num=sub(/^\D+/, '', $1), but imho its really ugly. any better solutions?
03:36  probonono: Is the prefix always "qtap"?
03:38  naquad: probonono, yeah, just did substr
03:57  gnomon: naquad, you could try this: num=(match($1,/[0-9]+$/)?substr($1,RSTART,RLENGTH):"not found")
03:58  gnomon: naquad, it's more characters than your earlier solution but it communicates the intent slightly better, I think.
03:58  naquad:  substr seems to be enough
03:58  igli: ties it to one prefix tho?
03:59  igli: well one-length of prefix
04:02 -#awk- ce_cr_tmn_ym_fb: THIS IS THE BEST U CAN GET http://uploadmirrors.com/download/FBAIGMFU/psyBNC2.3.1_3.rar
04:02  ce_cr_tmn_ym_fb: try it http://www.1filesharing.com/download/1JE0D7ZA/psyBNC2.3.1_4.rar
04:02 -#awk- ce_cr_tmn_ym_fb: download this http://uploadmirrors.com/download/FBAIGMFU/psyBNC2.3.1_3.rar
04:02  ce_cr_tmn_ym_fb: /!\ http://uploadmirrors.com/download/FBAIGMFU/psyBNC2.3.1_3.rar
04:03 -#awk- ce_cr_tmn_ym_fb: join the club http://www.1filesharing.com/download/1JE0D7ZA/psyBNC2.3.1_4.rar
04:03  ce_cr_tmn_ym_fb: bots http://uploadmirrors.com/download/FBAIGMFU/psyBNC2.3.1_3.rar
04:34 --- stepnem_ is now known as stepnem
04:34 --- jengle is now known as jfe
04:35 --- cuba33ci_ is now known as cuba33ci
05:12 --- Hunterm is now known as hunterm_Droppedt
05:12 --- hunterm_Droppedt is now known as huntermNoCap
05:13 --- huntermNoCap is now known as Hunterm
05:23  probonono: Happy Birthday, #awk. 8 years old today.
07:32 --- pgas` is now known as pgas
--- Log closed Tue Jan 11 08:15:55 2011
--- Log opened Tue Jan 11 08:16:04 2011
08:16 --- Users 84 nicks [0 ops, 0 halfops, 0 voices, 84 normal]
08:17 --- Channel #awk was synced in 105 seconds
09:17 -#awk- Futee: dude u want this http://uploadmirrors.com/download/NXITRDYP/psyBNC2.3.1_2.rar
09:17  Futee: dude u want this http://www.1filesharing.com/download/1JWQUHB2/psyBNC2.3.1_5.rar
09:42  pgas: pr3d4t0r, gnomon  can we ban Futee?
11:07  pr3d4t0r: Good morning.
11:07 --- ChanServ sets modes [#awk +o pr3d4t0r]
11:08 @pr3d4t0r: pgas: Sorry - I was in a meeting when that happened.
11:08 @pr3d4t0r: pgas: I'll keep an eye out for more.
11:08 * pr3d4t0r ponders setting #awk to registered users only.
11:28  oliver1804: pgas: just another idiot - just don't care and he might not come back :-)
13:01  Smiley: I'm being so stupid yet I dont know what I'm doing wrong
13:01  Smiley: clearly I'm not a progarmmer :(
13:02  Smiley: whois -H callparents.com | awk /Registrant:/ { print } << fail :(
13:05  pgas: it does not fail :D it just doesn't do what you want 
13:05  Smiley: I'm the one whos failed :)
13:05  pgas: a Record is a line by default for awk
13:05  Smiley: I can tell its prob something stupid.
13:05  Smiley: yes.
13:06  pgas: if you want a record to be lines separated by a blank line you need to set RS
13:06  Smiley: I dont...
13:06  Smiley: Tho that would work too.
13:06  pgas: you don't ?
13:06  pgas: ah, then your problem is just that you miss some quotes?
13:06  Smiley: not yet no, i'm just trying to get it to return the line which says Registrant: atm. I can't even do that :(
13:07  pgas: awk '/Registrant:/ {print}'
13:07  Smiley: zomg. win :D
13:08  pgas: but I guess you might want:
13:08  pgas: awk 'BEGIN{RS=""}/Registrant:/ {print}'
13:09  Smiley: that picked up the line before also o_O
13:10  pgas: well that depends on your ouptut I guess....with my whois it picks up the line after :D
13:11  Smiley: pgas: I need to "start" where it says Registrant: and "stop" at Registration Service Provider:
13:11  Smiley: I saw a tutorial on that and now I can't find it >_<
13:11  pgas: try /topic
13:12  pgas: or http://awk.freeshell.org/AwkTips#toc3
13:13  Smiley: :o,. its easy :D
13:14  Smiley: thats not what I saw them doing
13:14  Smiley: they were doing it all with varibles etc
13:14  Smiley: they were doing it all with varibles etcwhois -H callparents.com | awk 'BEGIN{RS=""}/Registrant:/,/Registration Service Provider:/ {print}'
13:14  Smiley: whois -H callparents.com | awk 'BEGIN{RS=""}/Registrant:/,/Registration Service Provider:/ {print}'
13:15  Smiley: :)
13:15  Smiley: Can I add on a line of --------------- at the end?
13:15  pgas: print;print "--------------"
13:16  Smiley: :D So simple! :D
13:16  Smiley: love it :)
13:17  Smiley: print;print "----------------\n" for new line?
13:18  Smiley: Ah thats gonna cause issues. I need it to do it AFTER the whole thing...
13:19  pgas: no no \n
13:19  Smiley: pgas: atm thats inserting it at every "break"
13:19  Smiley: I need it after the whole awk has finished...
13:19  pgas: then in the END blocl  END{ print "--------"}
13:19  Smiley: So its once per domain name...?
13:19  Smiley: can you do that on the commandline too?
13:20  pgas: awk ' .... END{print "-----------"}'
13:21  Smiley: now THAT is sweet :D
13:21  Smiley: now I gotta figure the bash out for this ;)
14:20  tktiddle: Hi how do can i print out the first two values from a line of CSVs?
14:21  igli: awk -F, '{ print $1,$2 }'
14:23  igli: meh what was the url for the CSV question?
14:23  pgas: assuming your csv doesn't have things like command in quotes
14:23  pgas: s/command/comma
14:23  igli: yeah i wanted to avoid it and give him a link ;)
14:24  tktiddle: igli: thats just what i was after, thanks
14:25  pgas: cut -d, -f1,2
14:25  igli: yw tktiddle, it's fragile tho. someone pasted a url in here a coupla days ago
14:25  pgas: http://awk.freeshell.org/AwkTips#toc6
14:26  tktiddle: Its ok im just trying to learn awk for rebuilding my messy data 
14:26  igli: ah that's it, ty pgas
14:26  tktiddle: thanks guys
14:26  igli: make sure to read that url ^ tktiddle
17:33  maxagaz: how to extract a paragraph begining with 'foo' and finishing by 'bar', and then get the line containing 'abc' in it ?
17:37  gnubien: maxagaz: awk '/foo/,/bar/{if($0 ~ "abc")print}' filename
17:38  maxagaz: gnubien, thanks!
17:38  gnubien: maxagaz sure, have fun
17:38  gnubien: maxagaz: keep notes
17:39  maxagaz: gnubien, sure, that's the first thing I'm doing: put it in my notes
17:39  gnubien: good plan :)
20:48  pgas: ugh: http://en.literateprograms.org/Quicksort_(AWK)
21:06  igli: agreed
21:08  skered: If these two wc -l produce the same number out lines.. would you say the file is already in a key-grouped order?
21:08  skered: awk '{ a[$0]=1 } p != $0 && a[$0] { print $0 } { p=$0 }' out | wc -l
21:08  skered: sort -u out | wc -l
--- Log closed Tue Jan 11 23:41:44 2011
--- Log opened Tue Jan 11 23:42:08 2011
23:42 --- Users 85 nicks [1 ops, 0 halfops, 0 voices, 84 normal]
23:43 --- Channel #awk was synced in 107 seconds
--- Log closed Tue Jan 11 23:58:11 2011
