--- Log opened Wed Oct 20 00:00:31 2010
02:21  galerien: hi guys, I need to convert a character to integer using awk, is that possible ?
02:26  jwillia3: galerien, your awk may have the ord() function
02:27  galerien: jwillia3, thanks, I'll check that in the man
02:28  galerien: nope...
02:30  jwillia3: you can make a big table mapping characters to numbers then.
02:33  galerien: ok... But my problem is actually that awk doesn't return my array in the right order (like Sep1 09h => Sep1 00h => Sep1 10). Do you know what could cause this ? I think it's because it's "thinking" char and not number so it's getting messed up, but....
02:33  jwillia3: galerien, because awk doesn't have linear arrays. it has associative arrays, which do not have order
02:34  galerien: anyway I can have it to order my stuff?
02:34  awknsed: Hey jwillia3 
02:34  awknsed: I finished my code
02:35  awknsed: http://dpaste.com/260440/
02:35  awknsed: it works just fine :)
02:36  jwillia3: galerien, arrays don't have orders. You can print them in order if you want
02:36  jwillia3: good, awknsed 
02:36  awknsed: Thanks a lot, again.
02:36  jwillia3: no problem
02:40  galerien: jwillia3: can you tell me how I could do that please ?
02:41  jwillia3: galerien, when you insert into that array, insert into another array that maps 1..n to the key of the original array.
02:42  galerien: jwillia3, ok, i'll try to do that....
02:42  jwillia3: galerien, and when you go to print, for (i=1; i<=n; i++) print(array[ a2[i] ])
02:43  galerien: I see, thanks
03:05  galerien: jwillia3, Hi again, I've got trouble actually tipping what you just told me, can you help me out if I give you a bit of my code ?
03:05  jwillia3: galerien, http://dpaste.com
03:05  galerien: ok, thanks ^
03:07  galerien: http://dpaste.com/260444/ < tell me if you don't have enough code, I can paste it all but it's 200 lines^^
03:09  jwillia3: galerien, if the dates are not already in order when you insert them, you're going to have to sort them yourself.
03:11  galerien: like split the string and use if 00 => 09, then print, if 10 => 19 then print and if 20 => 23 then print ?
03:12  jwillia3: galerien, you need to sort the months in the correct order, though
03:12  galerien: Only september, that's ok
03:12  jwillia3: oh, they you don't need it in the key and you can just loop from 1 to 30.
03:13  galerien: a... wait a sec
03:15  galerien: Sorry,  wrong lines of code, I don't have problem sorting out month and day, but month day and hours (it's 3am over here ^^) : http://dpaste.com/260447/
03:17  jwillia3: galerien, and what? you want to sort by the values in userHour?
03:18  galerien: jwillia3, yes
03:19  galerien: I need it to give me something like 00 => 01 ==> 02, and not the mess i'm currently getting
03:19  jwillia3: galerien, if you're only using gnu awk, you can use the sort functions.
03:20  galerien: ok, let me check that in the manual
03:21  jwillia3: asort()
03:22  galerien: asort(s [, d])
03:22  galerien: I found it, thanks, i'll try that
03:39  galerien: jwillia3, Ok, it seems to work, still have some problem but I think I can handle by myself, and especially tomorrow  after 12 hours of sleep: THANKS
03:39  jwillia3: np
03:50  twb: This command: dpkg-parsechangelog | awk '/^Distribution: / {print $2}')
03:50  twb: ...emits strings like "hardy" and "hardy-security".
03:51  twb: What's an easy way to tell it to print the bit before the - in $2?
03:51  twb: (Like ${2%%-*} in sh.)
04:42 --- mar77i_ is now known as mar77i
--- Log closed Wed Oct 20 05:01:46 2010
--- Log opened Wed Oct 20 05:02:09 2010
05:02 --- Users 103 nicks [0 ops, 0 halfops, 0 voices, 103 normal]
05:03 --- Channel #awk was synced in 90 seconds
05:27  g0pher: May i add a page to http://awk.freeshell.org describing awk usage on windows ?
05:42  g0pher: re: http://awk.freeshell.org/WartAndWishList  -- (goedel: Please, could somebody give an example for non-assignable strings?)
07:07 --- incubus is now known as Guest93347
--- Log closed Wed Oct 20 07:19:51 2010
--- Log opened Wed Oct 20 07:20:12 2010
07:20 --- Users 98 nicks [0 ops, 0 halfops, 0 voices, 98 normal]
07:20 --- Server: [jordan.freenode.net] [freenode-info] if you're at a conference and other people are having trouble connecting, please mention it to staff: http://freenode.net/faq.shtml#gettinghelp
07:21 --- Channel #awk was synced in 93 seconds
--- Log closed Wed Oct 20 08:37:01 2010
--- Log opened Wed Oct 20 08:37:25 2010
08:37 --- Users 99 nicks [0 ops, 0 halfops, 0 voices, 99 normal]
08:38 --- Channel #awk was synced in 94 seconds
10:34  kyanardag_: ssh username@host "awk '$3~/PATTERN/' /home/user/path/to/filename" gives syntax error around ~. How can I wrap awk command like that to run remotely? 
10:35  pgas:  ssh username@host 'awk '\''$3~/PATTERN/'\'
10:38  g0pher: perhaps OT - how insert spaces like ;nbsp in html - eg nojoy [[g0pher]] {{{          }}} [[UserPages]]
10:42  kyanardag_: pgas, thanks
13:18  g0pher: pgas: http://awk.freeshell.org/AwkOnWindows  -- some reason could not get <toc> to work ?
13:19  pgas: you need some:
13:19  pgas: == titles 
13:19  pgas: for the toc
13:21  g0pher: yes - let edit it
13:24  g0pher: ok - nevermind - now it is working -- strange - had almost the same before - but the Contents did not show up
13:28  pgas: I hacked the toc extension a bit for the faq...so it might not be as robust as it should be...
13:32  g0pher: after ``Contents`` - getting superfluous line: ``Some available versions of awk for ms windows.``
13:35  pgas: the toc  takes all the titles
13:37  pgas: it might be easier without toc and to just use a numbered list
13:38  g0pher: ok - will do - ging back to edit it
14:34  gionnico: hi
14:34  gionnico: how can i strip timestamps of dmesg?
14:35  gionnico: i need to delete "[*] " after \n
14:37  pgas: cut -d ' ' -f 2-
14:40  gionnico: i mean it's like [    5.386204] usb 5-2: usb_probe_device
14:42 --- evilRado is now known as Rado
14:43  pgas: awk '{sub(/[^]]*[]] /,"");print}'
14:45  gionnico: thanks :)
17:03  Ward|: printf "bla1\nbla2\nbla3\n" | awk -W interactive '!NR%2' outputs nothing
17:03  Ward|: (i want it to output bla2\n)
17:03  gnubien: Ward|: echo -e "1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n" |awk 'NR%5==0'  #prints 5 10
17:05  Ward|: gnubien, thanks
17:05  cthuluh: Ward|: you need parenthesis: !(NR%2)
17:05  Ward|: no i need to loose the ! :)
17:05  Ward|: if i understand correctly at least
17:06  Ward|: but i think i do now it works :)
17:06  cthuluh: 4# printf "bla1\nbla2\nbla3\n" | awk  '!(NR%2)'
17:06  shbot: cthuluh: bla2
17:08  Ward|: gnubien 's code works aswell, so i guess there are 2 options :)
17:09  gnubien: Ward|:  echo -e "1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n" |awk '!(NR%5)' #prints 5 10
17:09  Ward|: yeah i understand gnubien 
17:10  gnubien: me too, now :)
17:10  Ward|: gnubien, at first i thought the dropping of the ! made it work
17:10  gnubien: yea, more than one way to do it in awk
17:14  cthuluh: sorry, I didn't mean that gnubien's solution didn't work, I just wanted to show how to make the first approach more correct
17:15  gnubien: cthuluh: no problem even if someone assumed that, good learning experience imho
17:16  cthuluh: :)
--- Log closed Wed Oct 20 21:13:12 2010
--- Log opened Wed Oct 20 21:13:33 2010
21:13 --- Users 106 nicks [0 ops, 0 halfops, 0 voices, 106 normal]
21:15 --- Channel #awk was synced in 120 seconds
--- Log closed Wed Oct 20 21:21:39 2010
--- Log opened Wed Oct 20 21:22:01 2010
21:22 --- Users 108 nicks [0 ops, 0 halfops, 0 voices, 108 normal]
21:22 --- Server: [zelazny.freenode.net] [freenode-info] channel trolls and no channel staff around to help? please check with freenode support: http://freenode.net/faq.shtml#gettinghelp
21:23 --- Channel #awk was synced in 106 seconds
--- Log closed Wed Oct 20 21:49:15 2010
--- Log opened Wed Oct 20 21:49:39 2010
21:49 --- Users 108 nicks [0 ops, 0 halfops, 0 voices, 108 normal]
21:51 --- Channel #awk was synced in 106 seconds
--- Log closed Wed Oct 20 22:15:49 2010
--- Log opened Wed Oct 20 22:16:14 2010
22:16 --- Users 105 nicks [0 ops, 0 halfops, 0 voices, 105 normal]
22:16  galerien: yitz_, I have a huge log file and it's taking me 15 minutes to complete the script (i have to check for users every time), so I want to put it on different array for every days... I'm I clear enough ?
22:17  yitz_: Do you need to parse/load all that data?
22:17 --- Channel #awk was synced in 107 seconds
22:18  yitz_: I don't know if using a different variable would speed things up much
22:20  galerien: Well it would, in the end I have to like 10 000 differents users for every lines (i've got about 1 million line)... so I'm sure it would
22:22  galerien: i have to check like*
22:25  galerien: yitz_,  anyway, do you know how to create variables with $1$2 in them ?
22:25  pgas: not possible
22:25  pgas: 10000 keys is not that a huge number for an associative array
22:26  pgas: (and the variables might be implemented using the same kind of associative array anyway)
22:27  galerien: Well, i'm sure it's not that huge, but even if I have a good laptop, it has to check it for a lots of lines and it's taking ~15 minutes... witch is long
22:28  yitz_: CPU bound? IO? Memory?
22:28  jwillia3: galerien, why don't you post your code and a small, representative sample of your input
22:28  pgas: but are you sure the problem is the associative array? anyway, awk as no other data structure
22:28  galerien: jwillia3, ok I'll do that
22:29  galerien: yitz_, 2,53ghz * 2, 4 gb memory, 7200rpm hard drive
22:30  yitz_: You got to check what's being maxed out during the running
22:30  galerien: !paste
22:31  pgas: lisppaste: url
22:31  lisppaste: To use the lisppaste bot, visit http://paste.lisp.org/new/awk and enter your paste.
22:32  pgas: $ time awk 'a[$1]++;END{print length(a)}' file
22:32  pgas: 1000000
22:32  pgas: real    0m4.690s
22:34  pgas: it's a very simple example, but it creates 1 million elements in 4 s with gawk and a very small pc via 1Gz 256m ram
22:34  galerien: http://dpaste.com/260835/ < the code http://dpaste.com/260836/ < The first 2 minutes
22:35  waldner: start turning all those ".*blah.*" into just /blah/ 
22:35  galerien: ok
22:36  pgas: not sure if ($5 ~ /blah/) is faster than match but it not impossible that it is
--- Log closed Wed Oct 20 22:42:28 2010
--- Log opened Wed Oct 20 22:42:54 2010
22:42 --- Users 106 nicks [0 ops, 0 halfops, 0 voices, 106 normal]
22:44 --- Channel #awk was synced in 104 seconds
22:46  galerien: pgas, I don't think I get the thing about the way to store users...
22:48  galerien: waldner : You mean tipping time LC_ALL=C ./program < file ?
22:49  waldner: yes
22:50  waldner: may or may not help, depending on the processing you do, but it usually helps if your locale is otherwise multibyte
22:50  galerien: waldner, ok, thanks, i won 0.2 seconds for a 8.7 second run ^^ but thanks, that might be usefull if I try to run it on the full log
22:51  pgas: galerien: if I understand correctly you can write the first for loop and if afterward like this: if (userListD[$1$2$7]++==0) { userDaily[$1" "$2]++; lengthD++}
22:52  pgas: and you can probably do the same thing for the second loop + if
22:54  pgas: you can also probably move the split in order to do it only when you need it
22:55  pgas: ah no you need it anyway
22:57  pgas: if (userListHp[tab3[1]$1$2$7]++==0) { lengthH++; userHour[$1$2 " " tab3[1]]++} should do the same thing as the second for + if
23:00  pgas: if (($5 ~ /pop|imap/) && ($6 ~/LOGOUT/)) { 
23:02  galerien: pgas, thanks, I did it and I gained 0.5 seconds over 8.5 seconds, that's good, I'm trying with the full log and i'll get back to you ;)
23:02  pgas: hmm
23:03  galerien: yes ?
23:03  pgas: I would expect the gain to be much more
23:04  galerien: arf
23:04  pgas: 8.5 seconds sounds like forever if you are trying on a small file
23:04  pgas: what does your script looks like now?
23:05  galerien: 68,194 lines
--- Log closed Wed Oct 20 23:11:06 2010
--- Log opened Wed Oct 20 23:11:28 2010
23:11 --- Users 105 nicks [0 ops, 0 halfops, 0 voices, 105 normal]
23:12  pgas: (and since you are using gnu awk you don't need the lengthD variable since length(a) also works on array)
23:13 --- Channel #awk was synced in 107 seconds
23:14  galerien: ok, you just divided the runing time by 900... NICE
23:15  galerien: pgas, ok thanks I didn't knew that
23:20  pgas: yeah that sounds more like it, you avoid around 10000 iterations on each line over the users since looking up in an associative array is in constant time
23:21  pgas: (on average)
23:21  pgas: night
23:22  waldner: night
23:23  galerien: good night, and thanks again
23:23  mar77i: why does gawk refuse to take /[A-Z]{3}/ regexes - not even escaped ones, as the documentation says work \{\}
23:24  waldner: gnu awk - use --re-interval
23:24  waldner: other awks - it depends, it's not supported everywhere
23:25  mar77i: gawk == gnu awk :)
23:25  waldner: surely mawk doesn't have it, unless it's compiled using external regexps, which it never is
23:25  waldner: yes, then use --re-interval
23:26  Quintin: ii  evolution-data-server                 2.28.1-0ubuntu1                            evolution database backend server
23:26  Quintin: I have a list from dpkg -l evolution
23:27  Quintin: I want to uninstall every package.... the package name is the second word there ... how do I do this?
23:27  waldner: dpkg -l evolution | awk '{print $2}' | xargs apt-get remove
23:28  waldner: assuming no weird chars, which package names shouldn't have anyway
23:28  Quintin: ah thnx.  knew a $2 was in there somewhere
23:29  cthuluh: aptitude remove '~ievolution'
23:30  waldner: cthuluh++
23:32  cthuluh: aptitude++
--- Log closed Wed Oct 20 23:38:43 2010
--- Log opened Wed Oct 20 23:39:06 2010
23:39 --- Users 105 nicks [0 ops, 0 halfops, 0 voices, 105 normal]
23:39  waldner: in many localse yes
23:39  waldner: *locales
23:39  waldner: probably more like Aaà etc., even
23:40  mar77i: ouch
23:40  waldner: welcome to localization
23:40 --- Channel #awk was synced in 105 seconds
23:40  mar77i: now I know why my english became good with computers
23:57  dborba: Hey fellas, splitting a big cobol file into a number of small ones. Using awk '/EJECT/{i++}{print > "file"i".cbl}' bigfile . I'd rather name the file with the name of specific registers in the big file. Each section starts with a 01   REG_NAME, then a bunch of lines until EJECT. How might I be able to name each file as REG_NAME?
23:57  dborba: ^ note that in my description I forgot a " between .cbl and }
--- Log closed Thu Oct 21 00:00:08 2010
