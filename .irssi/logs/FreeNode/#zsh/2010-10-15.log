--- Log opened Fri Oct 15 10:30:18 2010
10:30 --- Users 157 nicks [0 ops, 0 halfops, 0 voices, 157 normal]
10:31 --- Channel #zsh was synced in 75 seconds
10:38  silver_hook: Hullo. Can anyone tell me why here at the end of the PROMPT I get blue instead of white? http://pastebin.ca/1962846
10:40  Mikachu: if you have a fairly new zsh i would use %F{blue} and %f instead
10:41  Mikachu: hm, you have a weird linebreak there
10:41  silver_hook: Mikachu: What's the difference BTW? I read on ZshWiki that I should use the this form %{$fg[blue]%} an
10:41  Mikachu: is that just a paste mistake?
10:41  Mikachu: line 33
10:41  Mikachu: shouldn't be a separate line
10:42  silver_hook: Yeah, line 33 in paste is part of 32 in file.
10:42  silver_hook: I guess I should have used some other way to paste.
10:43  Mikachu: well, the end is white here
10:44  silver_hook: You have to get into a Git, SVN or something like that.
10:44  silver_hook: So I suppose the fault is in the upper 'vcs_info' block.
10:45  Mikachu: http://mika.l3ib.org/tmp/white.png
10:45  Mikachu: i'm a bit confused though, you don't use vcsinfo in your prompt
10:45  Mikachu: oh wait there it is
10:45  Mikachu: that might explain it :P
10:46  silver_hook: ...I *do* get the ending '}:' as cyan.
10:46  Mikachu: well, probably a bad idea to mix 'colors' and %F
10:46 * silver_hook is noob.
10:46  silver_hook: Oh, OK.
10:47  silver_hook: But what's the difference between the two?
10:47  silver_hook: I couldn't find it anywhere ...I *did* RTFM and search online already.
10:47  Mikachu: the syntax? :P
10:48  silver_hook: That's all?
10:48  silver_hook: Same function only shorter?
10:53  Mikachu: you could ask the same thing about %B, you could use %{$'\e[1m'%} instead
10:55  silver_hook: So, yes?
10:57  silver_hook: And do colours stack? I mean, if I use '$reset_color' does this reset to default colour or just to the previous one?
10:57  Mikachu: default
10:57  Mikachu: $reset_color just prints ^[[0m
11:01  silver_hook: What does that do? :\
11:03  henrikbjorn: resets the color to white i think
11:14  silver_hook: OK, the fault is in the vcs_info block.
11:15  silver_hook: I have to somehow get the lines 11 and 13 to reset colour. If I add '%{$reset_color%}' it just echoes it to the STDOUT.
11:19  silver_hook: Nailed it! :D
11:20  asyd: lapin!
11:26  silver_hook: What I don't get is when in _practice_ do I get PROMPT3 and PROMPT4?
11:28 * silver_hook is happy now :] â†’ http://imagebin.ca/view/8bf_sR.html
11:29  silver_hook: Next step: make it detect if user is root and if so, use different colours.
11:34  Mikachu: silver_hook: type a ' on its own on a line
11:34  silver_hook: (and, yes, I RTFM'd PROMPT{3,4}, but am non the smarter)
11:35  silver_hook: Mikachu: Naah, that's PROMPT2.
11:35  Mikachu: ah right
11:35  Mikachu: prompt3 is for select prompts
11:36  Mikachu: and prompt4 is for setopt xtrace
11:36 * silver_hook stooopeed, no understandy
11:36  Mikachu: aww
11:37  Mikachu: select par in a b c; do echo $par; break; done
11:37  Mikachu: setopt xtrace
11:37  Mikachu: that'll show them
11:38  silver_hook: Aaaaah, OK.
11:38  silver_hook: Thanks :]
11:39  ketil: I'd like to configure completion in zsh, but this is rather more complicated than I was hoping.  Any quick way to disable command-specific completion for one particular command (darcs)?
11:40  Mikachu: compdef -d darcs
11:43  ketil: Mikachu, great!
11:44  silver_hook: Thanks for all the help, guys! :D
11:44  silver_hook: You're great!
11:46  ketil: Is it possible to list out the completion definitions as well?  (compdef seems to be missing the --help option :-)
11:46  Mikachu: compdef -<tab>
11:46  Mikachu: shows nothing you would want
11:47  Mikachu: generally the function for completing a command foo is _foo, so you can just check with 'which _foo'
11:47  Mikachu: but it probably won't be very interesting
11:47  ketil: Right.  I found a list of options in the manual page for zshcompsys.
11:47  Mikachu: you'll have to trigger the completion once first though
13:37  ilf: i did 'unstopt extendedhistory', but my history still gets saved with a timestamp o_O
13:38  kamcio2603: ilf: do you know how to make dynamic comletion in zsh?
--- Log opened Fri Oct 15 13:49:16 2010
13:49 --- Users 163 nicks [0 ops, 0 halfops, 0 voices, 163 normal]
13:50 --- Channel #zsh was synced in 79 seconds
14:18 --- qwerty is now known as Guest32611
14:18 --- qwerty is now known as Guest32611
14:19  taha_: how can i ensure that the input contains only digits?
14:19  taha_: how can i ensure that the input contains only digits?
14:19  Mikachu: what input?
14:19  Mikachu: what input?
14:21  taha_: a zsh shell script input
14:21  taha_: a zsh shell script input
14:22  Mikachu: are we talking about a parameter?
14:22  Mikachu: are we talking about a parameter?
14:22  taha_: yes
14:22  taha_: yes
14:22  Mikachu: [[ $1 = <-> ]]
14:22  Mikachu: [[ $1 = <-> ]]
14:24  taha_: thanks
14:24  taha_: thanks
16:18  ft: um, which module defined the menuselect keymap again?
16:18  ft: um, which module defined the menuselect keymap again?
16:19  ft: didn't complist do that?
16:19  ft: didn't complist do that?
16:21  ft: yes. it does. Nevermind.
16:21  ft: yes. it does. Nevermind.
--- Log closed Fri Oct 15 16:33:36 2010
--- Log closed Fri Oct 15 16:33:38 2010
--- Log opened Fri Oct 15 18:17:17 2010
18:17 --- Users 157 nicks [0 ops, 0 halfops, 0 voices, 157 normal]
18:18 --- Channel #zsh was synced in 76 seconds
18:23  myrkraverk: raven% ~/bin/stunnel          
18:23  myrkraverk: /usr/bin/zsh: can't open input file: /var/perforce/bin/stunnel
18:23  myrkraverk: Why would that happen?
18:24  thrig: many different reasons
18:24  thrig: a permission or ownership problem comes to mind
18:25  myrkraverk: Well, I'm the same user that created/owns the file.
18:25  myrkraverk: It has +x (obviously)
18:25  myrkraverk: raven% cat ~/bin/stunnel 
18:25  myrkraverk: #!/usr/bin/zsh
18:25  myrkraverk: ...
18:27  Yorokobi: What is the input file stunnel is using? What are its permissions?
18:27  thrig: permissions good on the / file? the /var file? etc. dtrace|ktrace|strace|truss|sh -x it to find where the error comes from, etc.
18:29  myrkraverk: raven% ls -l -d /var/perforce 
18:29  myrkraverk: drwx------ 8 perforce perforce 4096 Oct 15 16:51 /var/perforce
18:29  myrkraverk: Could that be the issue?  zsh in not suid.
18:29  Yorokobi: Are you the perforce user?
18:29  myrkraverk: Yes.
18:30  myrkraverk: raven% whoami
18:30  myrkraverk: perforce
18:31  myrkraverk: truss/strace are missing... I don't have dtrace on linux.
18:31  thrig: so install strace
18:32  myrkraverk: Just did.
18:35  myrkraverk: open("/var/perforce/bin", O_RDONLY|O_NONBLOCK|O_DIRECTORY|O_CLOEXEC) = 3
18:35  myrkraverk: read(3, ""..., 1)                       = 0
18:35  myrkraverk: Obviously can't read it for some reason.
18:36  myrkraverk: drwx------ 2 perforce perforce 4096 Oct 15 17:20 bin
18:40  KarlHungus: i'm feeling quite ignorant right now. in bash, i can do: items='a b c';for i in $items;do echo $i;done   and the loop will split on the space and echo a\nb\n\c\n, in zsh i just get a b c\n
18:41  KarlHungus: how can i accomplish this in a way thats portable between both zsh and bash?
18:43  KarlHungus: its probably an IFS issue, but i'm completely missing it.
18:43  Mikachu: maybe something like $(echo $items)
18:44  myrkraverk: Oops, I think I made a fork bomb ;(
18:44  myrkraverk: I wonder how though.
18:44  KarlHungus: Mikachu: well that works, but why?
18:45  Mikachu: KarlHungus: because $() splits on $IFS even in zsh
18:45  KarlHungus: so zsh doesnt split on IFS by default in a loop?
18:45  KarlHungus: its expecting an array?
18:52  myrkraverk: What exactly does ulimit -t do?
18:52  myrkraverk: When the seconds are reached, what happnes?  The processes are killed?
18:52  Mikachu: it doesn't split on ifs anywhere by default
18:52  Mikachu: myrkraverk: yes
18:52  Mikachu: for parameters
18:53  KarlHungus: Mikachu: i suppose thats useful, but it will take a bit of adjusting ;)
18:57  Mikachu: you can setopt shwordsplit if you want, or emulate sh, but generally making scripts that run in both bash and zsh is Not Fun[tm]
18:57  thrig: making scripts that run in any *sh is Not Fun(TM)
18:57  thrig: ls -- # whoa, not portable!
18:58  Mikachu: running ls from a script is pretty stupid though :P
18:59  Mikachu: generalizing is also stupid
18:59  thrig: the -- is the problem
18:59  myrkraverk: What exactly is the difference between soft and hard limits of ulimit?
19:06  myrkraverk: I wonder, is stunnel cpu hungry?
19:06  thrig: benchmark it
19:07  myrkraverk: I'm just wondering how I should do that, since I think real world benchmark would probably be more useful.
19:07  myrkraverk: I set ulimit -SHt 60 for it.  If it runs out, so be it.
19:08  thrig: create a stunnel pipe. cat data over it. watch the CPU.
19:09  myrkraverk: Yeah.
19:09  myrkraverk: I think I'll just watch the CPU usage of the current stunnel process and lower it if I think I can.
19:11  myrkraverk: I just wish I knew if I could limit the bandwith it uses, without a firewall configuration.
--- Log closed Sat Oct 16 11:43:50 2010
