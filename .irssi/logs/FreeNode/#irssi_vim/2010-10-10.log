--- Log opened Sun Oct 10 00:00:39 2010
00:00 @rudi_s: :-D
00:13 @rudi_s: shabble: Any progress on the scripting support? I'm just asking because it would be useful for estragib's :map Y y$ thing as well.
00:15 @shabble: not really, I'm afraid.
00:16 @shabble: keep getting other things to do dumped on me :/
00:16 @rudi_s: No problem, I know the feeling. I'll try to implement it without it, we can adapt it later to work with the scripting stuff.
00:16 @shabble: ok
00:17 @rudi_s: estragib: How complex do you think should the {rhs} mapping support by?
00:17 @rudi_s: [count][operator][command] enough or is something more complex necessary?
00:20  estragib: rudi_s: fortunately i'm on the spoiled brat/user side of this, so i didn't think much. it does seem more than enough.
00:21 @rudi_s: ;-) Good, I'll try to add that.
00:21  estragib: would this work for :map g1 :b 1 ?
00:23  estragib: oh wait, you will do counts for mappings? so i can :map gt :bn and do 2gt?
00:23 @rudi_s: estragib: I think so. Try it.
00:23 @rudi_s: estragib: :map g1 :b 1 won't work yet, arguments aren't passed for ex-commands, I'll have to fix that.
00:24 @rudi_s: estragib: Ah, no count's don't work yet with ex commands.
00:24 @rudi_s: Will fix that.
00:25 * estragib <3 vim_mode.pl
00:25 @rudi_s: :-)
00:28  estragib: i seem not to be able to map irssi line editing features directly (like history_backward), only those that have id="command" in the config. is that the intended behavior?
00:28 @rudi_s: estragib: I'm not sure, example please?
00:28 @rudi_s: s,?,.,
00:30  estragib: oh, of course that isn't possible. i tried to :map <C-P> backward-history
00:30 @rudi_s: estragib: Ah, real, irssi commands. That won't work. Only things you can run with /xxx will work.
00:30 @rudi_s: I'm not sure how to add something like backward-history.
00:31  estragib: hm, :map <C-P> j does not work either
00:32 @rudi_s: estragib: What exactly should it do?
00:32  estragib: disregard me, mixed up j and k. it works.
00:32 @rudi_s: ;-)
00:32 @rudi_s: Great.
00:36  virssi-bot: irssi-scripts: dev Tom Feist * 9035261 (1 files in 1 dirs): factored all the visual stuff out of prompt_replace into its own file.
00:36  virssi-bot: irssi-scripts: dev Tom Feist * 7dd9bb7 (0 files in 0 dirs): renamed prompt_replace to uberprompt
00:36  virssi-bot: irssi-scripts: dev Tom Feist * b39c8d2 (1 files in 1 dirs): actually properly fixed the escaping of stuff now.
00:36  virssi-bot: irssi-scripts: dev Tom Feist * d80d66a (1 files in 1 dirs): documented uberprompt better, and added the 'prompt changed' signal
00:36  virssi-bot: irssi-scripts: dev Tom Feist * 217d729 (1 files in 1 dirs): added some debug logging to catch 'prompt changed'
00:36 @rudi_s: estragib: Pushed the count for ex-modes fix, please test.
00:36  virssi-bot: irssi-scripts: dev Tom Feist * 73487a7 (2 files in 1 dirs): moved more functions out into visual.pl, cleaned up some of the formatting.
00:36  virssi-bot: irssi-scripts: dev Tom Feist * 4973893 (1 files in 1 dirs): added Bugs section in comments describing crash bug when debug enabled. Rare ...
00:36  virssi-bot: irssi-scripts: dev Tom Feist * 6012b57 (1 files in 1 dirs): added doc about uberprompt_format setting
00:36  virssi-bot: irssi-scripts: dev Tom Feist * d2e68af (1 files in 1 dirs): added uberprompt_debug as an irssi setting. defaults to off.
00:36  virssi-bot: irssi-scripts: dev Tom Feist * 9dc60fc (2 files in 1 dirs): Merge remote branch 'origin/dev'
00:36  virssi-bot: irssi-scripts: dev Simon Ruderich * a89e3f5 (1 files in 1 dirs): vim_mode: Support counts with mapped ex-commands.
00:36  virssi-bot: irssi-scripts: dev Simon Ruderich * fb0e4bb (1 files in 1 dirs): vim_mode: Mapped irssi and <Nop> commands reset count.
00:36  virssi-bot: irssi-scripts: dev commits dd2e9a7...fb0e4bb - http://bit.ly/ckcFHe
00:36 @rudi_s: estragib: Pushed the count for ex-modes fix, please test.
00:50  estragib: rudi_s: works great for :bn
00:51 @rudi_s: ... but?
00:51  estragib: ... i expected it to work for :b too, so i tried ":map gb :b" and did 2gb to go to buffer 2. am i confusing ideas here?
00:52 @rudi_s: estragib: Yes. 2gb means call gb two times (at least that I think how it works in vim - and how it works in vim_mode). Calling :b two times won't do what you want.
00:53 @rudi_s: Hm, seems to work in Vim.
00:53 @rudi_s: Damn, I hate Vim .. so powerful .. so many things to implement.
00:53  estragib: i think vim is inconsistent there a bit :)
00:54  estragib: but you had me convinced already. i was blaming it on vimperator to do it wrong already
00:54 @rudi_s: estragib: Hm, looks like a count to a buffer command is passed as range in vim.
00:54 @rudi_s: ;-)
01:11 @rudi_s: estragib: Pushed fix to support :map g1 :b 1, please test.
01:11  virssi-bot: irssi-scripts: dev Simon Ruderich * 143ae36 (1 files in 1 dirs): vim_mode: Allow mappings with numbers. ...
01:11  virssi-bot: irssi-scripts: dev Simon Ruderich * bb2167d (1 files in 1 dirs): vim_mode: Support arguments to mapped ex-arguments.
01:11  virssi-bot: irssi-scripts: dev commits fb0e4bb...bb2167d - http://bit.ly/bgMNSc
01:12 @rudi_s: I have to think how to support :map g :b; 3g to go to buffer 3.
01:15 @rudi_s: I guess I'll have to add count support to all ex-modes ..
--- Log closed Sun Oct 10 01:34:20 2010
--- Log opened Sun Oct 10 01:34:43 2010
01:34 --- Users 7 nicks [2 ops, 0 halfops, 0 voices, 5 normal]
01:35 --- Channel #irssi_vim was synced in 75 seconds
01:37 @rudi_s: estragib: Any other problems found (I'm in a fixing mood ;-)).
01:38  estragib: i noticed that longer mappings will hide shorter mappings. for example, once you ":map test /echo test", you can't do a single "t" movement anymore. intended/known?
01:38 @rudi_s: estragib: You can, you just need to wait a moment until test times out (1 second). This should work similar to Vim.
01:39 @rudi_s: t<one second>x should go before x.
01:39 @rudi_s: I'm not sure how to handle that better.
01:39 @rudi_s: (Maybe we should display it in the statusbar.)
01:40  estragib: oh, right. no, that makes sense.
01:43  estragib: hm, it is a little confusing. starting a "dt" leaves me stranded, timeout doesn't seem to happen.
01:44 @rudi_s: estragib: What mappings do you have?
01:44  estragib: :map test /echo test
01:45  estragib: then i insert 123456789<ESC>0dt
01:45  estragib: oh, and it works. the "t" is just never displayed in the showcmds
01:46 @rudi_s: estragib: Yeah, the problem is that it's not displayed because we're still waiting for the command. t is only displayer after the "t" command is active and we're waiting for the movement key.
01:47  estragib: huh? dT shows me dT at once, shouldn't it show me dt after the waiting for "test" has timed out?
01:48 @rudi_s: estragib: You're absolutely right, it should.
01:50 @rudi_s: estragib: Pushed a fix, please test.
01:50  virssi-bot: irssi-scripts: dev Simon Ruderich * b5f5fce (1 files in 1 dirs): vim_mode: Whitespace only change.
01:50  virssi-bot: irssi-scripts: dev Simon Ruderich * 7d6d8c7 (1 files in 1 dirs): vim_mode: Display command in statusbar after flushing pending map. ...
01:50  virssi-bot: irssi-scripts: dev commits bb2167d...7d6d8c7 - http://bit.ly/b5nL6n
01:51  estragib: oh wow, that was fast :)
01:51 @rudi_s: ;-) Was an easy fix.
01:54 @rudi_s: I'm working on the ex-mode count fix.
01:55  estragib: you weren't kidding about the fixing mood :)
01:55 @rudi_s: Hehe, no ;-)
01:56  estragib: dotting/repeating is still a little wonky
01:56 @rudi_s: estragib: Example please.
01:56  estragib: repeating an "a" or "A" with . behaves like repeating an "i"
01:57 @rudi_s: estragib: Damn, I thought I fixed that one.
01:57  estragib: oh wait, when?
01:57  estragib: i noticed this earlier
01:57 @rudi_s: estragib: Some days ago.
01:57  estragib: i'll retest
01:59  estragib: you're right. can't reproduce.
01:59  estragib: sorry
01:59 @rudi_s: Good :-)
01:59 @rudi_s: np
02:48  virssi-bot: irssi-scripts: dev Simon Ruderich * d01581b (1 files in 1 dirs): vim_mode: Support counts with ex-commands. ... - http://bit.ly/cqE0tN
02:48 @rudi_s: estragib: Just added support for counts in ex-commands.
02:48 @rudi_s: "This supports e.g. :5b, :5bd, :bd 5."
02:49 @rudi_s: Also your gb map with 5gb should work now. Please test.
02:50 @rudi_s: :map gb :b
03:05  estragib: not bad at all
03:05 @rudi_s: :-)
03:06  estragib: as an aside, i just noticed :bd will list buffers matching "d" in the sb item
03:07  estragib: i mean before you hit enter
03:09  estragib: back to the changes: this is seriously good stuff. can't think of anything to nitpick about atm.
03:09 @rudi_s: Great ;-)
03:09 @rudi_s: Will fix the :bd problem.
03:12 @rudi_s: estragib: Fix pushed, please test.
03:12  virssi-bot: irssi-scripts: dev Simon Ruderich * 34fd585 (1 files in 1 dirs): vim_mode: Fix :bd from displaying buffers matching d. - http://bit.ly/8XV1zW
03:13  estragib: it might make sense to draw attention to the slight difference to vim regarding :maps. i mean that they don't actually need the <CR> after :excmds
03:15  estragib: using the gb map without count leaves with an open :b prompt in vim, in vim_mode i get an error msg
03:15  estragib: *leaves me
03:16  estragib: oh, and wishlist: :map <arg1> could print the current mapping
03:16 @rudi_s: estragib: Good idea, I'll add that to the docs.
03:19  estragib: fix works, of course
03:19 @rudi_s: ;-)
03:20 @rudi_s: estragib: Hm, I'm not sure how to handle that with an open :b prompt.
03:22  estragib: i don't know that you should. :) i guess small differences are to be expected, same as with the <CR>. if you don't reimplement the entirety of vim, that is. :p
03:23 @rudi_s: Yeah, true. I think for now I'll just add it to known bugs.
03:24  estragib: i guess vim has the "benefit" of being able to just put arbitrary strings in the input buffer and let its engine handle everything flat. it don't think that's possible here.
03:25 @rudi_s: Yep, it's a nice thing ;-) maybe in the future of vim_mode ..
03:26  estragib: and as i've already mentioned, your script is already better than zsh's vi mode in certain ways. i'm more than happy about it.
03:27  estragib: which, as we all know, is the ultimate measurement of quality. 0:)
--- Log closed Sun Oct 10 03:34:52 2010
--- Log opened Sun Oct 10 03:35:11 2010
03:35 --- Users 7 nicks [2 ops, 0 halfops, 0 voices, 5 normal]
03:35 --- Server: [lindbohm.freenode.net] [freenode-info] channel flooding and no channel staff around to help? Please check with freenode support: http://freenode.net/faq.shtml#gettinghelp
03:36 --- Channel #irssi_vim was synced in 75 seconds
03:42 @rudi_s: estragib: Added :map {lhs}, please test.
03:42  virssi-bot: irssi-scripts: dev Simon Ruderich * 5e058e0 (1 files in 1 dirs): vim_mode: Document :mapping ex-commands doesn't need <Cr>.
03:42  virssi-bot: irssi-scripts: dev Simon Ruderich * def8af6 (1 files in 1 dirs): vim_mode: Add known bug.
03:42  virssi-bot: irssi-scripts: dev Simon Ruderich * b97f23c (1 files in 1 dirs): vim_mode: :map {lhs} displays matching mappings.
03:42  virssi-bot: irssi-scripts: dev commits 34fd585...b97f23c - http://bit.ly/ceIGrJ
03:47  estragib: yup
03:49  estragib: it would be nice if <BS> in command mode would work
03:51  estragib: (spoiled brat and all)
03:57 @rudi_s: estragib: ;-) Pushed, please test.
03:57  virssi-bot: irssi-scripts: dev Simon Ruderich * aee98a7 (1 files in 1 dirs): vim_mode: Add <BS> in command mode. ... - http://bit.ly/b5QKqJ
04:00  estragib: holy hell. this is starting to weigh on my conscience, all the little changes i'd find "nice" and one minute later they're done. :D
04:00 @rudi_s: :-D
04:03 @rudi_s: estragib: Btw. \ should work now (with uperprompt.pl).
04:04 @rudi_s: I'll be going to bed now, enough fixes for today. Good night ;-)
04:04  estragib: yeah, i've noticed. i'm using uberprompt atm and it works fine.
04:04 @rudi_s: Perfect.
04:04  estragib: ok, have a good night too!
04:04 * rudi_s &
04:04 @rudi_s: Thanks.
--- Log closed Sun Oct 10 05:34:20 2010
--- Log opened Sun Oct 10 05:34:43 2010
05:34 --- Users 7 nicks [2 ops, 0 halfops, 0 voices, 5 normal]
05:35 --- Channel #irssi_vim was synced in 75 seconds
--- Log closed Sun Oct 10 07:33:51 2010
--- Log opened Sun Oct 10 07:34:16 2010
07:34 --- Users 7 nicks [2 ops, 0 halfops, 0 voices, 5 normal]
07:35 --- Channel #irssi_vim was synced in 74 seconds
--- Log closed Sun Oct 10 09:33:24 2010
--- Log opened Sun Oct 10 09:33:51 2010
09:33 --- Users 7 nicks [2 ops, 0 halfops, 0 voices, 5 normal]
09:33 --- Server: [holmes.freenode.net] [freenode-info] channel trolls and no channel staff around to help? please check with freenode support: http://freenode.net/faq.shtml#gettinghelp
09:35 --- Channel #irssi_vim was synced in 82 seconds
--- Log closed Mon Oct 11 07:24:35 2010
