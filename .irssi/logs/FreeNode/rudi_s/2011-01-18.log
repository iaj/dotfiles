--- Log opened Tue Jan 18 21:28:17 2011
21:28 --- Query: Starting query with rudi_s on FreeNode
21:28 iaj: huhu:-)
--- Log closed Tue Jan 18 21:34:10 2011
--- Log opened Tue Jan 18 21:38:37 2011
21:38 rudi_s: Hi.
21:38 iaj: Na Maestro
21:38 iaj: alles fresh?
21:39 rudi_s: Ja, etwas stressig aber sonst ganz okay. Und bei dir?
21:39 iaj: Jo auch.. arbeite zur Zeit 12 h / Tag
21:39 iaj: Sau aetzend:(
21:39 iaj: Sag mal kennst du dich mit 'lftp' aus?
21:39 rudi_s: :-/
21:39 rudi_s: Ja, hab aber schon länger nichts mehr damit gemacht.
21:40 rudi_s: (Bzw. nur noch automatisiert.)
21:40 iaj: Versuch gerade ne Datei auf nen Server zu schicken und zu überschreiben wenn sie schon existiert
21:40 iaj: lftp -e 'put foobar.txt' ftp://ftp.verimatic.com
21:40 rudi_s: put?
21:40 iaj: ist da was falsch dran?
21:41 rudi_s: Sollte eigentlich passen.
21:41 rudi_s: Hm, denke es sollte -c anstelle von -e sein.
21:42 iaj: cd ok, cwd=/                                             
21:42 iaj: put: Access failed: 553 Can't open that file: Permission denied (foobar.txt)
21:42 rudi_s: Ah, ne vergess das.
21:42 rudi_s: Ist ne eindeutige Meldung, du hast nicht die Rechte die Datei zu lesen/löschen.
21:42 iaj: lesen/loeschen? aber ich will se doch hochschicken
21:43 rudi_s: Die Frage ist erstmal nur, ob das lokal ist oder nicht. Wenn du einfach lftp ftp://server machst, mach mal ls -al im Verzeichnis.
21:43 iaj: Hmmm also ich krieg nichts zurück
21:44 iaj: lftp ftp.verimatic.com:/> ls -al
21:44 iaj: lftp ftp.verimatic.com:/>
21:44 rudi_s: Hm. Sicher dass du da Lese/Schreibrechte hast?
21:44 rudi_s: Weil zumindest . und .. sollten da kommen.
21:44 iaj: also wenn ich mich über FTP einklinke geht alles
21:44 rudi_s: ftp ftp://server geht, aber lftp nicht?
21:45 iaj: 230 Anonymous user logged in
21:46 iaj: hmmmm ok der schickt mich anonym druff
21:46 iaj: Dabei hab ich einträge in .netrc
21:46 iaj: Bei VIM funzts ja auch :(
21:46 rudi_s: Sicher dass du dich richtig anmeldest?
21:46 iaj: Ok... nun geht's
21:46 rudi_s: Ich weiß nicht ob lftp die .netrc liest.
21:46 iaj: mit user:pass
21:47 rudi_s: (Hab die noch nie verwendet.)
21:47 iaj: Laut man lftp schon
21:47 iaj: Wo kann ich sonst die user/pass hinterlegen
21:47 rudi_s: .lftp/bookmarks
21:48 iaj: hmmm wie? dann konntest du lftp ftp://server benutzen?
21:48 rudi_s: Folgendes Format:
21:49 rudi_s: name ftp://user:password@server.org/
21:49 rudi_s: Und dann mit lftp name
21:51 iaj: Hmmm aber dann kann man nicht lftp name/pfad
21:52 rudi_s: Hm, das kann sein, hab ich nie getestet, vielleicht sagt die man Page was.
21:52 rudi_s: Aber wozu brauchst du den Pfad?
21:52 iaj: nunja ich will mir ne webpage offline (sie hat kein SSH zugang) halten im GIT
21:52 iaj: und hab dafür dann nen Makefile mit den upload: instruktionen
21:52 rudi_s: mirror!
21:53 iaj: die files sind alle an verschiedenen orten :(
21:53 iaj: und nicht alle, nur ein paar
21:53 rudi_s: ? Dann fixe das, was bringt dir dann ein Git repository?
21:54 rudi_s: Wenn du irgendwas erstellen musst, nimm einfach ein "online" Verzeichnis und kopiere das Zeug dann im Makefile passend rein.
21:57 rudi_s: Und dann mit mirror synchronisieren, mirror --verbose --reverse --delete --dereference (z.B. man page weiß mehr).
21:57 iaj: Ohh ok das geht natürlich auch :)
21:58 rudi_s: ;-) make sync oder so übernimmt dann alles für dich, und lftp überträgt nur wenn nötig.
21:58 rudi_s: Falls du rsync hast wäre das natürlich noch besser ...
21:58 rudi_s: Denk auch dran dass die Verbindung wahrscheinlich nicht verschlüsselt ist.
--- Log closed Tue Jan 18 22:04:10 2011
--- Log opened Tue Jan 18 22:13:26 2011
22:13 iaj: Was meinst du mit im Makefile passend reinkopieren?
22:13 rudi_s: Naja, z.B. so
22:13 rudi_s: sync:
22:13 rudi_s: mkdir -p online
22:14 rudi_s: cp -r src/* online/
22:14 rudi_s: mv online/this-shouldnt-be here online/but/here
22:14 rudi_s: ...
22:14 rudi_s: lftp -e '.. sync ..' ...
22:14 rudi_s: Und das sync dann nur noch mit dem online, nachdem du es so angepasst hast, wie du es auf dem WebServer haben willst.
22:15 rudi_s: Am einfachste ist aber, wenn du die Dateien gleich so hinbaust, wie sie online sein. Dann nur das .git Verzeichnis excluden.
22:16 iaj: lftp -e '... sync ..' ... wie sieht das aus?
22:16 rudi_s: Steht eigentlich oben.
22:17 iaj: hmm also ich hab nen webordner /src   da erstell ich's so wie ich's haben will und den Ordner online der es so enthält wies online ist
22:17 iaj: wenn ich alles direkt in ner richtigen Struktur mache
22:17 rudi_s: lftp -e 'mirror --verbose --reverse --delete --dereference --dry-run online .'
22:17 iaj: dann kann ich darauf verzichten oder?
22:17 iaj: hmm
22:17 rudi_s: Worauf verzichten?
22:17 iaj: auf src und online ordner
22:17 rudi_s: Aber ja, so würde ich es machen.
22:17 rudi_s: Sorry, jetzt bin ich mir nicht mehr sicher.
22:18 iaj: Wenn das ganze recht gross wird
22:18 iaj: hat man eben nen Problem
22:18 iaj: weil alles doppelt :)
22:18 iaj: ach
22:18 iaj: --delete
22:18 iaj: seh ich grad
22:18 rudi_s: Ich würde es so machen. Alles in den src/ Verzeichnis und das so anpassen wie es auf dem Server liegt. Dann das alles in ein Git repository und das Makefile auf die oberste Ebene.
22:19 rudi_s: So wird das Makefile und das .git-Verzeichnis nicht mit hochgeladen, sondern nur alles in src.
22:19 iaj: Ahhh ok mom
22:19 iaj: ich teste das mal :)
22:19 rudi_s: Dein, das --delete löscht Dateien auf dem Server die nicht mehr da sind, löschst nichts lokales.
22:19 rudi_s: Das --dry-run ist wichtig.
22:19 rudi_s: Damit du nichts kaputt machst beim Testen.
22:22 iaj: kann man Makefiles auch von vim aus aufrufen?
22:23 iaj: Achso und wie könnte ich das ganze in nem remote Pfad syncen... also zb /test/foo wie kann ich 2 lftp commands chainen?
22:23 rudi_s: :make, aber das halte ich für nicht so sinnvoll. Meine Meinung ist das ein Texteditor keine IDE ist und für sowas die Shell besser ist. ^Z und dann make ist genauso schnell.
22:23 rudi_s: Klar, dann halt nicht . beim mirror sondern der remote Pfad.
22:23 rudi_s: Chainen?
22:24 iaj: Hmmmm okay... irgendwie fehlt in der lftp anweisung der server :)
22:24 rudi_s: ?
22:24 rudi_s: Nach dem -e '' ..
22:25 iaj: der dry-run zeigt nur was er ändern würde oder?
22:26 iaj: wie ich gerade merkte :D
22:26 rudi_s: Ja, und du solltest den solange verwenden bis du _ganz_ sicher bist das alles passt.
22:26 rudi_s: Sonst sind schnell wichtige Daten weg .. --delete kann da böse sein.
22:26 iaj: Hmm aber wie kann ich denn machen dass er nur neue bzw geaenderte Daten hochschiebt?
22:26 iaj: Da ich meist Typo verwende werde ich eher das brauchen
22:27 iaj: will ja nicht das ganze Typo bei mir rumfliegen ham
22:27 rudi_s: Hm, also das solltest du aber .. (aus mehreren Gründen).
22:27 iaj: Und wenn ich das so ausführe bleibt er auf dem Server
22:27 rudi_s: Ohne das --delete sollte es gehen, aber das kann ich dir nicht versprechen.
22:28 rudi_s: Okay. Dann mach es anders: lftp -c 'open server-name-hier; mirror ...';
22:28 iaj: To be removed: 8 directories, 12 files, 0 symlinks
22:28 iaj: auch ohne delete
22:29 rudi_s: mirror ist eigentlich dafür da, dass das alles lokal liegt. Und das empfehle ich dir auch, weil dann kannst du erstens leicht lokal testen, leicht updaten, bei nem kaputten Update leicht das Update rückgängig machen, reparieren, .. eben alles was du mit nem VCS machen kannst.
22:29 iaj: Hmmm ja aber manche Sachen werden online kommen, wenn ich im TYPO was upgrade zB
22:29 iaj: dann kommts erst online und nicht bei mir
22:29 rudi_s: Hm, schau mal in die man page. Vielleicht helfen dir die --only-newer, only-missing, etc. options.
22:30 rudi_s: Dann mirrorst du es lokal (also ohne das --reverse) und commitest dann lokal.
22:30 rudi_s: Dann hast du alle Änderungen in Git, oder noch besser, du machst das Update lokal und lädst nur noch hoch.
22:30 rudi_s: (Datenbank natürlich auch.)
22:31 rudi_s: (Aber ich bin kein Typo3 Experte .. halte auch nicht so viel davon.)
22:32 iaj: hehe... Okay.. ja das mit dem mirrorn klingt gut.. 
22:32 iaj: Wie nenn ich den Punkt im Makefile der von dem FTP server synchronisiert
22:32 iaj: Hmmm...
22:32 rudi_s: make fetch und make sync?
22:32 iaj: fetch is gut
22:32 iaj: dh den könnt ich dry ausführen?
22:32 rudi_s: Oder um mehr git like zu sein, make pull und make push.
22:33 rudi_s: Dry?
22:33 iaj: den ohne --reverse
22:33 rudi_s: Achso, ja. Damit solltest du auch anfangen, damit du sicher sein kannst, dass du keine Daten löschst.
22:34 rudi_s: Also praktisch mkdir repo; cd repo; git init; mkdir src; cd src; lftp -c 'mirror ohne reverse und co' und dann cd ..; git add src; git commit; .. und dann den Rest.
22:34 rudi_s: Und am besten die Datenbank auch in dem Repository speichern, dann hast du alles zusammen und kannst es leicht wieder herstellen/nachschauen (denk auch da an die fehlende Verschlüsselung!).
22:35 iaj: Hmmm stimmt.. nur kann ich die Datenbank bei dem Schrotthoster nicht einfach exportieren soweit ich weiss
22:35 iaj: pull:
22:35 iaj: lftp -c 'open ftp.verimatic.com; mirror --verbose --delete --dereference --dry-run /webseiten /src'
22:35 iaj: wäre das so ok?  
22:36 rudi_s: Also ein / ist zu viel, ich denke der vor /src.
22:36 rudi_s: Das --derefernce solltest du bei diesem mirror nicht brauchen, das hab ich nur damit er sicher symbolische Links als Dateien kopiert.
22:36 rudi_s: Denke dran, dass das --delete hier lokale Daten löscht.
22:36 rudi_s: Gibt ein PHP-Programm das ganz nett Datenbanken dumpen kann.
22:37 rudi_s: Oder einfach direkt `mysqldump` in nem PHP-Skript ausführen.
22:37 iaj: hmmm würde das funktionieren: chmod 710 file:/src/fileadmin/user_upload
22:37 iaj: oder ist der / zuviel
22:37 iaj: mit online kommter klar (ohne /)
22:38 rudi_s: file:/src? Was soll das tun?
22:38 iaj: Ahhh ok...
22:38 iaj: chmod 740 file:/Users/iaj/web/verimatic/src/fileadmin/common/fixes/pngfix.js
22:38 iaj: das sieht besser aus :)
22:38 rudi_s: Wieso file:/?
22:38 iaj: ka... steht halt so da :)
22:38 rudi_s: Und das ist lokal, wozu brauchst du das?
22:38 rudi_s: ???
22:38 iaj: lftp -c 'open ftp.verimatic.com; mirror --verbose --delete --dereference --dry-run webseiten src'
22:38 iaj: nach dem Befehl
22:38 iaj: hätte es lftp ausgeführt....
22:39 rudi_s: lftp? Wieso sollte das ein chmod machen?
22:39 iaj: ka das steht da im DryRUN
22:39 rudi_s: Achso, lokal .. okay, das gibt Sinn.
22:39 rudi_s: Es stellt die gleichen Rechte wie auf dem Server her.
22:39 iaj: würde es ja gerne mal testen
22:39 iaj: aber... 
22:39 iaj: haha :D
22:39 rudi_s: Das musst du ja nicht ausführen, das macht lftp für dich.
22:40 rudi_s: Das lokale mirroren kannst du gefahrlos machen.
22:40 rudi_s: Sollte nur nichts in src drin sein.
22:40 iaj: auch mit -delete?
22:40 rudi_s: Wenn da nichts drin ist, dann ist das kein Problem. mirror (ohne --reverse) ist nur lokal.
22:40 iaj: delete heisst er würde es bei mir löschen im SRC wenns da ist und nicht auf dem Server
22:40 rudi_s: Jep.
22:40 rudi_s: Und dann gleich alles ins Git repository packen ;-)
22:43 iaj: Hehe :-)
22:43 iaj: Cool... das gefällt mir
22:44 rudi_s: :-)
22:44 iaj: Nun bräuchte ich nur ne grössere Platte an meinem MB
22:45 rudi_s: ... externe Festplatte ;-)
22:45 rudi_s: (So groß?)
22:46 iaj: Jo.. kack TYPO eben :D
22:46 rudi_s: ...
22:47 iaj: muss ich am ende noch ein rm -rf online/ einbauen?
22:47 iaj: von dem Script?
22:47 rudi_s: Wozu brauchst du online/?
22:48 rudi_s: Das sollte jetzt eigentlich nicht mehr nötig sein.
22:48 iaj: hoeh?
22:48 iaj: Wir hatten doch ein cp -r src/* online
22:48 iaj: andererseits.. ja hast recht :D
22:48 rudi_s: Wenn du es schaffst alles passend in src zu machen.
22:49 rudi_s: *, dann brauchst du das nicht mehr ;-)
22:49 iaj: Jep...
22:50 iaj: Cool lass es grad pullen
22:50 rudi_s: :-)
22:50 iaj: Das kann Zeit ersparen
22:50 rudi_s: Jep, allerdings dauert das syncen (also hochladen) bei vielen Dateien etwas. Aber das kannst du ja im Hintergrund laufen lassen.
22:51 rudi_s: Er läd aber nur hoch was sich geändert hat (Achtung, das kann natürlich was überschreiben!)
22:51 iaj: Jep... und wenn nen File bei mir geloescht wurde
22:51 iaj: dann wirds auch da geloescht
22:51 rudi_s: Dann löscht er es auf dem Server.
22:51 rudi_s: Jep.
22:51 rudi_s: Aber dafür hast du ja git ;-)
22:53 iaj: Ich glaub mit --only-newer und --only-missing zugleich bin ich gut bedient
22:53 iaj: Aber muss eh ne ganze Seite von einem Server zum andern erstmal rüberspielen
22:53 rudi_s: Könnte sein, die hab ich nie verwendet.
22:53 iaj: Da kommts mir gerade recht
22:53 rudi_s: mirror ;-)
22:54 iaj: Erstell gerade die lokale Kopie
22:54 iaj: hatte nie Makefiles verwendet aber die sind ja sowas wie lokale Skripte
22:55 rudi_s: Jep. Und ziemlich praktisch, vor allem wenn du selbst noch irgendwas erstellen willst, weil die das auch nur machen wenn nötig.
22:58 iaj: Wie meinst du ?
22:59 rudi_s: Wenn du z.B. irgendeine Datei aus einer anderen erstellen musst, kannst du das mit Makefiles sehr schön machen, weil die die Datei nur dann neu erstellen, wenn die Quelldatei verändert wurde.
22:59 iaj: Ahhh... jetzt hab ich's :) 
23:00 iaj: Endlich kann ich webfiles auch lokal editieren
23:00 iaj: Wobeis manchmal schon cool ist, wenn man sie per netrw editiert und dann direkt auf dem Server die änderungen sieht
23:00 rudi_s: ;-)
23:00 iaj: Das is n bissi das Dumme bei TYPO
23:00 rudi_s: Also ich finde es lokal angenehmer, weil dann kann man es testen.
23:00 iaj: da braucht man eben ne laufende TYPO instanz
23:00 rudi_s: Und mit Git weißt du auch, wann du was geändert hast.
23:00 rudi_s: Naja, sollte nicht so schwer zu installieren sein.
23:01 iaj: Brauch noch das entsprechende KnowHow
23:01 iaj: Wie meinste?
23:01 rudi_s: (git gc --aggressive nicht vergessen nachdem du alles importiert hast, das spart einiges an Platz.)
23:01 rudi_s: ?
23:01 iaj: git fc --aggresive ??
23:01 iaj: Ich werde erst ab der neuen Seite tracken
23:02 rudi_s: gc
23:02 rudi_s: man git-gc
23:02 rudi_s: .. versteh ich zwar nicht, aber okay. (Ein Backup von der Seite in dem Git Repository fände ich ne gute Idee.)
23:03 iaj: Hmmm, naja du musst wissen
23:03 iaj: mein Speicherplatz ist sehr begrenzt :)
23:03 rudi_s: .. falscher Computer ...
23:03 rudi_s: 433G  311G  101G  76% /home
23:06 iaj: Ohhh
23:06 iaj: Gemeinheit!
23:06 rudi_s: ;-)
23:06 iaj: Naja ich werd mir noch ne externe Festplatte zulegen... Hatte ich sowieso vor
23:07 rudi_s: Am besten (mindestens) zwei . als Backup.
23:08 iaj: Du meinst eine nur zum Backuppen?
23:08 rudi_s: Ja, mindestens.
23:08 rudi_s: (Falls dir deine Daten wichtig sind ..)
23:08 iaj: Jep.. naja
23:08 iaj: Es sind mehr die Konfigdateien, Bookmarks etc.
23:08 iaj: Das wär das verheerende :-)
23:09 rudi_s: Jep .. aber ich muss zugeben mir ist alles wichtig, deswegen versuch ich so gut wie möglich zu backupen.
23:09 iaj: Riesen grosses Online Git Repo wäre gut oder :)
23:09 rudi_s: Naja, nicht wirklich. Ich mag online nicht so, und alles in ein Git Repository ist auch nicht der beste weg.
23:10 iaj: :-D Stimmt schon.. aber da wärs doch sicher ;-D
23:10 rudi_s: Es sei denn der Server fällt aus, geht offline, du hast kein Internet mehr (Telekom, etc.) ... 
23:11 iaj: Hahaha, Dein Freund die Telekom :-)
23:11 iaj: Ja stimmt das suckt.
23:11 rudi_s: Internet/Cloud-Sicherung heißt noch lange nicht sicher (und sicher ist es ja eh nicht, dafür musst du es gescheit verschlüsseln.)
23:12 iaj: kann ich bei mirror einzelne Ordner ignoren?
23:12 rudi_s: man lftp ;-)
23:12 rudi_s: /mirror
23:12 rudi_s: n
23:12 rudi_s: n
23:12 rudi_s: Und schon bist du da.
23:14 iaj: Bei mir nich :)
23:14 iaj:        lftp  has  builtin mirror which can download or update a whole directory tree. There is also reverse mirror (mirror -R) which uploads or updates a directory
23:14 iaj: da bin ich noch drin :p
23:14 rudi_s: Vielleicht ein bisschen häufiger n.
23:16 iaj: exclude-regex/
23:19 iaj: Wie switchst du eigentlich buffer in Irssi=VIM
23:19 rudi_s: Meistens mit window_switcher.pl, /ws 
23:19 rudi_s: Wenn ich schon Text im Buffer stehen habe mit :b
23:20 iaj: Hmm ok... also meistens mit /ws 
23:20 iaj: Das gibst du dann per Hand ein?
23:20 rudi_s: Ja.
23:21 rudi_s: Aber meistens verwende ich eh alt-s und alt-a .. es sei denn ich will zu nem spezifischen Channel, dann /ws
23:22 iaj: watt macht alt-s ?
23:22 iaj: Ach previous.
23:23 rudi_s: Jep.
23:24 iaj: :-)
23:26 iaj: Baeh sollte mal mein Mail postfach aufräumen
23:26 iaj: ist ganz schön voll und zugemuellt
23:28 iaj: Benutzt du immernoch 'jj' zum Aborten? Ich habs nun ne Weile mit  CTRL-[ probiert aber langsam aber sicher nervts
23:30 rudi_s: Ich verwende immer noch jj, finde ich sehr bequem.
23:33 iaj: Hmmmm, werde es mir auch wieder einrichten... dachte C-[ würde sich irgendwann auszahlen, aber ich glaube jj ist einfach besser :)
--- Log closed Tue Jan 18 23:38:10 2011
--- Log opened Tue Jan 18 23:57:35 2011
23:57 iaj: Hmpf, 'foldoption' lügt!
23:57 rudi_s: Wieso das?
23:58 iaj: Weils sagt wenn search enthalten ist würde /foo<CR> es aufklappen
23:58 rudi_s: Hm, sollte es auch. Wenn nicht ist das AFAIK ein Bug.
23:58 iaj: set foldopen=block,insert,jump,mark,percent,quickfix,search,tag,undo
23:58 iaj: irgendwas falsch daran?
23:59 rudi_s: Hm, sieht richtig aus. Hab aber nicht die Hilfe gelesen.
--- Log closed Wed Jan 19 00:00:10 2011
