--- Log opened Tue Jan 18 10:16:29 2011
10:16 --- Users 539 nicks [0 ops, 0 halfops, 0 voices, 539 normal]
10:16  iaj: lo there- .. what's the command for dropping all tables in a database?
10:16 --- Channel #mysql was synced in 10 seconds
10:20  dr0id: iaj: drop database db_name; then create the DB again
10:22  blip-: hi, what's the syntax to loop over a table, lookup something in another table and update the first table (all on the fly) ?
10:29  VoVo64: blip-: UPDATE with a JOIN
10:30  blip-: VoVo64: would the looping be done using LOOP, ITERATE or WHILE ? I couldn't really understand what they do
10:30  ss23: blip-: You don't loop
10:30  ss23: Do you now about joins blip-?
10:31  blip-: ss23: no was able to avoid them in the past
10:31  ss23: Well, they're mega super amazing handy, and what makes SQL amazing
10:31  ss23: SQL without joins is like cereal without milk!
10:32  ss23: !tell blip- about basic join information
10:32  ss23: :<
10:32  ss23: basic joins
10:32  ss23: basic join information
10:32  ss23: DAMMIT
10:32  blip-: !tell blip- join
10:32  ss23: Let me search for what I'm thinking of
10:32  ss23: (The bot isn't amazing atm)
10:33  ss23: blip-: Very basic join information: http://hashmysql.org/index.php?title=Introduction_to_Joins - For more indepth info: http://dev.mysql.com/tech-resources/articles/mysql-db-design-ch5.pdf
10:33  blip-: I tried learning some of the more complex mysql commands in the past but found them pretty complex, so I ended up using the PHP or other language to accomplish things
10:33  blip-: ss23: thanks I will check this
10:37  quask: hi
10:38  quask: how do I convert an int field into a string? something like that:  select to_string(int_field) from tbl
10:40  gthorslund: erkules: smaller
10:40  Naktibalda: quask: why do you want to do that? you get strings in application anyway
10:42  quask: select int_field from tbl where to_string(int_field) like '123%'
10:43  quask: @Naktibalda, if I want to select all entries, that starts with '123': select int_field from tbl where to_string(int_field) like '123%'
10:44  Naktibalda: have you tried to use LIKE without conversion?
10:45  mysqlchat: hi
10:46  quask: thx @ Naktibalda
10:47  Maleko: why the chm manual download was removed?
10:49  Naktibalda: Real programmers don't use CHM
10:50  blip-: Hi, trying to understand joins better.  If I do "SELECT * FROM t1 INNER JOIN t2 ON t1.a = t2.b" then the result is matching a and b values.   Can I have the join return a whole record from t2 when t1.a=t2.b ?
10:50  dr0id: lol
10:50  Maleko: Naktibalda: implying that all mysql users are programmer
10:51  Naktibalda: blip-: what do you get now?
10:51  Naktibalda: Maleko: who else? admins?
10:53  VoVo64: Maleko: http://lists.mysql.com/announce/697
10:54  VoVo64: Maleko: that posting gives valid reasons for removing chm and also tells you about the current alternative
10:54  soa2ii: I cannot optimize this Query "SELECT DISTINCT `meter` FROM `meterreadings` WHERE `date` BETWEEN '2010-01-01 00:00:00' AND '2010-12-31 23:59:59';" but with an index on `date`, can I?
10:56  Naktibalda: range is very broad
10:56  soa2ii: Naktibalda: Yes, but there's nothing I can do about that.
10:56  Naktibalda: it could use an index if you get 10 years of data
10:56  Naktibalda: if you have
10:57  soa2ii: Naktibalda: Hm? What about the index and the number of years I have? I got minute values.
10:57  Naktibalda: index can be used if condition matches 15% of data or less
10:58 --- LinuxJedi|away is now known as LinuxJedi
10:59  soa2ii: Naktibalda: Even if I choose just one month it takes very long
10:59  Naktibalda: try a week :)
10:59  Naktibalda: or a day, it should start using index at some point
11:00  VoVo64: soa2ii: is `date` of datatype DATE or DATETIME?
11:00  soa2ii: VoVo64: DATETIME since it's a datetime :)
11:00  blip-: Naktibalda: I'm just reading that in the docs trying to understand joins.  I don't see why it's called a JOIN,  it doesn't join anything  in  SELECT * FROM t1 INNER JOIN t2 ON t1.a = t2.b
11:00  VoVo64: soa2ii: ah, thats why you calle the column `date`, right?
11:01  soa2ii: VoVo64: :P
11:01  soa2ii: VoVo64: But a datetime is a date in language isn't it? :)
11:02  VoVo64: soa2ii: a date in language is for me a specific day, ie 2011-01-18
11:02 --- Putr|Away is now known as Putr
11:02  soa2ii: Naktibalda: Right now I scan about 100.000 Datasets and m table contains over 30 million. The query takes very long though :/
11:02  Naktibalda: how many rows does it return?
11:03  soa2ii: Naktibalda: No idea it's still running. But I computed the amount in my head.
11:03  soa2ii: The DISTINCT will return something about 10 Values
11:04  Naktibalda: not 10 000?
11:04  soa2ii: Naktibalda: Nope.
11:04  soa2ii: Naktibalda: Does DISTINCT kill my index?
11:05  Naktibalda: no
11:05  Naktibalda: idfk
11:05  VoVo64: soa2ii: try an index on (`date`, `meter`)
11:05  Naktibalda: stupid bot, I want the_wench
11:05  VoVo64: Naktibalda: call archivist
11:05  Naktibalda: is he alive?
11:06  VoVo64: I sincerely hope so
11:06  VoVo64: But I don't know. He vanished here without leaving any info
11:08  Naktibalda: soa2ii: allways pastebin a query, output of EXPLAIN and CREATE TABLE statement(-s) when you ask a question about query optimization
11:09  ch077179: how do I determine the actual location of a db?
11:09  ch077179: i.e. the path?
11:10  VoVo64: ch077179: show global variables like 'datadir'; subdirectories there are the databases
11:10  VoVo64: ch077179: you should not temper with any file in there.
11:11  VoVo64: ch077179: do you want to take a backup?
11:11  ch077179: VoVo64, no no, I just need to document the locations
11:11  notregistered: how do I know what connection collation I shold choose from phpmyadmin?
11:12  notregistered: and character set
11:12  VoVo64: notregistered: #phpmyadmin
11:12  Maleko: VoVo64: any idea how to filter out results > 60 days in this statement: select timestampdiff(day,from_unixtime(`user_lastvisit`), now()) from .. where ...
11:14  VoVo64: Maleko: WHERE user_lastvisit > unix_timestamp(now - interval 60 day)
11:14  VoVo64: sorry, now()  not now
11:14  VoVo64: !tell Maleko about interval
11:14  ubiquity: Maleko: <datetime|date> -|+ interval <integer> <timeperiod>; #where <timeperiod> is second, minute, hour, day, month, year and some others. No plurals! egs., 'SELECT NOW() + INTERVAL 3 MONTH;' 'SELECT CURRENT_DATE - INTERVAL 1 DAY;'
11:16  Maleko: thanks :]
11:22  erkules: gthorslund: pepper
11:23  gthorslund: erkules: now you're getting close (depending on what picture you're looking at). you're welcome to put guesses as comments too :)
11:25  Syniq: Is there a way I can check the progress of an ALTER TABLE statement that's converting a MyISAM table with 13.05 million rows in it to InnoDB?
11:26  mysqlchat: Syniq: i guess show processlist will help
11:26  blip-: hi, question on syntax of INNER JOIN:  if my join condition is t1.a=t2.b, it returns only the a and b field results, is there a way to return other columns ?  ie t2.c and t2.d as is ?
11:27  VoVo64: blip-: SELECT t1.a, t2.b, t2.c, t2.d FROM t1 JOIN t2 ON t1.a=t2.b
11:27  blip-: VoVo64: ah that's easy enough. thanks
11:28  Syniq: mysqlchat: Not particularly. :/  It just says 'copy to tmp table'.
11:28  nightcrow: hiya, has anyone here got experience with infinidb?
11:28  Syniq: That, and that it's been running for 62060 seconds.
11:28  VoVo64: Syniq: although that won't help you know, but - did you change innodb buffer pool size larger than its default value?
11:28  Syniq: VoVo64: Probably not.
11:29  erkules: gthorslund: hrhr
11:29  nightcrow: im trying to install infinidb on ubuntu
11:29  VoVo64: Syniq: then you at least have a very likely explanation for the slowness
11:29  Syniq: You mean it's not the 15 indices and the fact it contains 13057897 rows? ;)
11:30  VoVo64: Syniq: default value of innodb buffer pool size is 8MB - that is way too small for anything larger than a toy dataset
11:30  Syniq: Took 2 days and 15 hours to index that table in MyISAM.
11:30  Syniq: VoVo64: OK, well, should I kill this, change the buffer size, and try again?
11:30  VoVo64: Syniq: did you change key buffer size larger than its default value?
11:30  nightcrow: but encountering quite a few problems - i can start mysql but cant connect to mysql via a query browser. Im trying to connect to localhost and i install mysql and infinidb by download all the deb files (calpont-mysqld, calpont-infinidb and calpont-mysql) and installed them with dpkg -i calpont*.deb
11:30  nightcrow: is there anything else i need to do to get it work?
11:31  Syniq: VoVo64: Nope.
11:31  VoVo64: Syniq: with a 8MB buffer pool, creating the 15 indeces of the 13m rows will create a _lot_ of disk i/o.  same is true for myisam and key buffer size
11:31  nightcrow: how can i configure it so i can connect remotely and also, when i do mysqladmin -u it tells me that i cant connect to mysql through socket mysqld.sock - i cant even find that file anyw
11:31  nightcrow: anywhere
11:31  nightcrow: can some one help me please
11:31  Syniq: VoVo64: So, what would you recommend changing it to?
11:31  VoVo64: Syniq: so now you also have the explanation why it took 2 days for your myisam table
11:32  Syniq: Oh, that wasn't on this box.
11:32  Syniq: That was on the dev database server.
11:32  Syniq: I have no idea what it's set to on that...
11:32  VoVo64: Syniq: depends on your available memory and what else is running on the box
11:32  VoVo64: !tell Syniq about tuning primer
11:32  ubiquity: Syniq: try https://launchpad.net/mysql-tuning-primer a shell script for basic mysql tuning suggestions.
11:33  Syniq: ubiquity: Not going to be much use here, as I've set it up on my desktop so I can poke and prod the tables to see what speeds these bastard queries up without making everything break for the other developers. :p
11:33  Syniq: er... VoVo64, even. xD
11:33  m-ohman: Can anyone recommend a good MySQL GUI for OSX?
11:33  VoVo64: Syniq: could you set innodb buffer pool size to 1GB without your desktop machine starting to swap?
11:34  Syniq: Possibly... It's got 4GB RAM.
11:34  VoVo64: Syniq: try it :) after import you can reduce it to 512MB if you like
11:35  VoVo64: !tell m-ohman about workbench
11:35  ubiquity: m-ohman: MySQL Workbench: http://mysql.com/products/tools/workbench/ it has its own freenode channel #workbench
11:35  VoVo64: m-ohman: although I don't know if it fulfills your definition of "good" :)
11:35  nightcrow: !tell nightcrow about infinidb
11:35  m-ohman: had problems with setting foreign keys etc in Querious
11:35  nightcrow: :(
11:35  nightcrow: can someone please help me?
11:36  Naktibalda: no
11:37  VoVo64: nightcrow: so you can connect to mysql locally, but not remotely?
11:37  Syniq: Yeah, I''m only using 2GB at the moment.
11:37  nightcrow: VoVo64: nope
11:37  VoVo64: !tell nightcrow about remote
11:37  ubiquity: nightcrow: remove bind-address= and skip-networking from my.cnf and grant permission to the external 'user'@'host' and remove any firewall rules blocking port 3306 and make sure no overrides on the mysqld commandline. See  http://hashmysql.org/index.php?title=Remote_Clients_Cannot_Connect
11:37  Syniq: VoVo64: How can I clear out the innodb temp table?
11:38  nightcrow: i mean, if i type idbmysql i get the mysql prompt
11:38  Syniq: VoVo64: The 8GB disk space it's used hasn't cleared. :/
11:38  VoVo64: nightcrow: about infinidb, I have no clue
11:38  nightcrow: i see
11:38  nightcrow: :-/
11:38  nightcrow: ok - sec - will try your solution
11:38  VoVo64: Syniq: you don't mean the ibdata, right?
11:38  VoVo64: Syniq: I'm also not sure if it was wise to interrupt the alter table :)
11:39  Syniq: arse.
11:39  VoVo64: Syniq: sorry?
11:39  nightcrow: VoVo64: #password in my.cnf is commented out
11:40  VoVo64: nightcrow: what directive is that?
11:41  nightcrow: [client]
11:41  nightcrow: the port is 3306
11:41  Syniq: VoVo64: http://www.pastie.org/1472990
11:41  nightcrow: and the socket is: /usr/local/Calpont/mysql/lib/mysql/mysql.sock
11:42  VoVo64: Syniq: you only changed that one single option, right? none of innodb_log_*
11:42  VoVo64: nightcrow: did you follow the instructions given by ubiquity?
11:42  Syniq: VoVo64: Nope
11:42  Syniq: VoVo64: The rest are all defaults.
11:42  nightcrow: VoVo64: yes
11:43  nightcrow: the bind-address doesnt exist and skip-networking was already commented
11:43  Syniq: VoVo64: It was 43M before.
11:43  Syniq: Sorry, 47M
11:44  Syniq: Also, SHOW INNODB STATUS; generates an error. >:(
11:44  VoVo64: Syniq: check mysql error log if innodb started up with mysql
11:44  ktlr: Does somebody know that, how can I set the maximum numbers of the columns per table ? :\
11:44  ktlr: http://dev.mysql.com/doc/refman/5.0/en/column-count-limit.html
11:45  ktlr: Consequently, a table cannot contain more than 65,535 / 765 = 85 such columns.
11:45  VoVo64: nightcrow: so from the remote machine do a "telnet <ip address of mysql server> 3306" <-- what does it return?
11:45  Syniq: VoVo64: I didn't get a warning about it not using InnoDB when I started that query...
11:45  VoVo64: Syniq: the query is still running?
11:45  ktlr: We would like to use more than 85 columns...
11:46  VoVo64: ktlr: smells like a design flaw
11:46  nightcrow: sec - will check
11:46  ktlr: VoVo64, what ?
11:47  nightcrow: VoVo64: is not allowed to connect to this mysql
11:47  ktlr: The application stores different data per column...
11:47  VoVo64: ktlr: a table with 85 varchar(255) columns smells like a design flaw to me
11:47  nightcrow: connection closed by foriegn host
11:47  VoVo64: nightcrow: ok, so mysql listens and accepts the incoming connection, but you don't have any grants defined for any user from the remote host
11:48  nightcrow: VoVo64: how do i do that?
11:48  VoVo64: !m nightcrow grant
11:48  ubiquity: nightcrow: See http://dev.mysql.com/doc/refman/5.1/en/grant.html
11:48  nightcrow: will do - sec
11:48  VoVo64: nightcrow: note - a mysql user is always username@hostname. so user foo@localhost is a different user than foo@remotehost
11:49  nightcrow: VoVo64: i see
11:50  nightcrow: can you give me the syntax on how to grant remote privileges?
11:50  nightcrow: to user root
11:51  VoVo64: nightcrow: not really a good idea, but if you insist... just grant root@remotehost ALL PRIVILEGES WITH GRANT OPTION. just the same as root@localhost
11:51  VoVo64: nightcrow: I hope thats on an internal network only?
11:51  nightcrow: yes it is VoVo64
11:51  nightcrow: :)
11:51  nightcrow: thank you though
11:52  nightcrow: ill try that
11:52  nightcrow: sec
11:52  niravana: Hey guys!
11:53  nightcrow: VoVo64: that didnt work :( i typed "grant root@remotehost all privileges with grant option;"
11:53  niravana: how is this possible that running query like this "SELECT a, (SELECT x FROM table WHERE table.z=table2.z) AS b FROM table2" runs 10x slower then executing query without subquery and executing subquery number of rows returned times in php rather then in one big sql?
11:53  ss23: niravana: Because subqueries are slow
11:54  ss23: It runs the subquery for every row on table2
11:54  ss23: You should be using a standard join
11:54  niravana: ss23: the same i do in php but it runs 10x faster executing them in php rather than one SQL
11:54  ss23: Eh, I'm not sure. But you're doing it wrong anyway.
11:54  niravana: i see no logic why it runs slower in one query then executing this subquery on result
11:55  Syniq: VoVo64: Nope.
11:55  niravana: ss23: i have this subquery which can not be written in join
11:55  ss23: That looks like it can be written as a join to me
11:55  niravana: the one I have is more complicated :]
11:55 --- Henke37b is now known as henke37
11:56  niravana: there is no logic, because I run the same subquery on every row returned in php and in that way its 10x faster. thats weird
11:58  Naktibalda: explain this query, then explain both queries used in PHP and pastebin
11:58  Naktibalda: not this, but a real query
11:58 --- txxt_ is now known as txxt
11:58  nightcrow: VoVo64: i also just did "update user set password=password('password') where user='root';"
11:59  nightcrow: and i flush privs but i still cant connect
11:59  nightcrow: :-/
11:59  nightcrow: telling me access is denied
12:01  niravana: Naktibalda: http://pastebin.com/acAi1fhX
12:02  niravana: nightcrow: perhaps you must use password_old() function
12:03  Syniq: VoVo64: SHOW INNODB STATUS apparently isn't working 'cause its been removed from 5.5...
12:03  Syniq: And is now SHOW ENGINE INNODB STATUS.
12:03  nightcrow: niravana: how?
12:03  niravana: "update user set password=password_old('password') where user='root';"
12:07  cssipi: Is it possible to select rows where date isn't numeric?
12:07  cssipi: where `date` isn't numeric*
12:07  ss23: o.O
12:07  ss23: Why datatype is `date`?
12:07  GotSanity: any idea why i am getting  syntax error with this? - UPDATE nav SET order = order + 1 WHERE order > 2
12:08  cssipi: ss23: It's the name of a field :p
12:08  ss23: I asked what datatype it is cssipi.
12:08  ss23: GotSanity: Use ` around order
12:08  ss23: GotSanity: "order" is a MySQL reserved word
12:09  GotSanity: gotcha, thanks
12:09  dyllan: Is it bad practice to create a MySQL table with the table name an integer?
12:09  cssipi: VARCHAR()
12:09  ss23: dyllan: Doesn't make a big difference. MySQL doesn't care.
12:09  dyllan: ss23, great
12:09  ss23: cssipi: Sounds like you haven't designed your database correctly
12:10  Aces1up: how would i do a query on a column and get like 10 rows with different values?  instead of reading in like 1000 rows and then sorting for unique entries?
12:10  Naktibalda: cssipi: WHERE `date` NOT REGEXP '^\d+$'
12:11  Naktibalda: Aces1up: SELECT DISTINCT col FROM table LIMIT 10
12:11  dyllan: ss23: would there be anything special needed when creating the table to let it know it is an integer?
12:11  GotSanity: even with 'order' quoted i am still getting a syntax error
12:11  Aces1up: naktibalda nice thanks.
12:12  ss23: dyllan: Using a proper field? If you want to store a date, use timestamp or datetime or date.
12:13  dyllan: sorry ss23 ill clarify.. .
12:14  dyllan: ss23: mysql_query("CREATE TABLE IF NOT EXISTS 12345 (field1 BIGINT(22), field2 VARCHAR(255))") or die('mysql error ' . (mysql_error()));  <--- that does NOT work
12:14  ss23: o.o
12:14  dyllan: ss23: mysql_query("CREATE TABLE IF NOT EXISTS blah (field1 BIGINT(22), field2 VARCHAR(255))") or die('mysql error ' . (mysql_error())); <--- that WORKS.
12:14  cssipi: ss23: It was made back in 2000, so I was just thinking about updating it :p
12:14  cssipi: THanks Naktibalda! :)
12:15  ss23: Oh I see dyllan
12:15  ss23: dyllan: `123456` might work.
12:15  dyllan: ss23: ahh ofcourse :\  thanks ss23
12:16 --- _Unode is now known as Unode
12:19  Syniq: ARGH
12:20  Syniq: Now it's completly ignoring all the parameters I'm passing and only connecting through the fscking domain socket instead of to the host and port I'm specifying.
12:20  Syniq: Aha!
12:20  Syniq: So, if I hand it localhost it ignores the parameters.
12:20  Syniq: If I hand it loopback, it works.
12:23  Naktibalda: localhost
12:23  GotSanity: I am attempting to update a single int field (increment by 1) of all the records on a table but for some reason I am getting a syntax error. any ideas where? UPDATE nav SET 'order' = 'order' + 1 WHERE 'order' > 2
12:23  Naktibalda: quotes
12:23  Naktibalda: hey, bot!
12:23  dr0id: !tell GotSanity about quotes
12:23  ubiquity: GotSanity: Use ` around identifiers (database/table/column/alias names) and ' around strings and dates. MySQL does allow " for strings, but ANSI standard uses " for identifiers (which you can enable with ANSI QUOTES option). Don't quote numbers http://pento.net/2009/03/03/dont-quote-your-numbers/
12:23  dr0id: ;)
12:23  dr0id: :P
12:23  Naktibalda: !tell Syniq about localhost
12:23  ubiquity: Syniq: in mysql, localhost uses a unix socket, 127.0.0.1 a tcp socket. UNIX sockets are generally faster. The grant is different too
12:23  GotSanity: thats a facepalm moment >.<
12:24  GotSanity: tyvm
12:25  blip-: hi, is the default type of JOIN, INNER JOIN ?   Seems to be doing the same thing whichever I use
12:26  Naktibalda: yes, it is
12:27  VoVo64: Naktibalda: bot only listens to ! commands. it doesn't trigger automatically (at the moment)
12:28  blip-: Naktibalda: thanks
12:28  blip-: !tell blip- about update
12:28  VoVo64: !m blip- update
12:28  ubiquity: blip-: See http://dev.mysql.com/doc/refman/5.1/en/update.html
12:29  blip-: ty
12:35  Syniq: Naktibalda: If I'm passing it a port, it shouldn't be using a domain socket.
12:35  VoVo64: Syniq: to connect locally via tcp/ip use -h 127.0.0.1 instead of localhost
12:35  Syniq: Yeah, I know that now.
12:35  Naktibalda: hostname has more power than port :)
12:36  Syniq: Naktibalda: Doesn't make that behaviour sensible.
12:36  Syniq: Anyway
12:37  blip-: question:  I figured out the SELECT/JOIN part and that returns many records that include the data I want.  At this point can UPDATE be integrated within the JOIN or shall I be doing things in the programming language from this stage on ?
12:37  blip-: my current join is:
12:37  blip-: SELECT places.name, locations.x, locations.y FROM places INNER JOIN locations ON places.name=locations.name
12:37  Naktibalda: !m blip- update
12:37  ubiquity: blip-: See http://dev.mysql.com/doc/refman/5.1/en/update.html
12:38  VoVo64: blip-: yes, you can rewrite that to an UPDATE
12:38 --- dub54_ is now known as dub54
12:38  blip-: VoVo64: is it true that I must do everything in 1 mysql command with this approach ?  I mean I can't think of it like when i use php, get result, parse, insert
12:39  blip-: I looked at the update doc but they don't have a conrete UPDATe/JOIN example, i'll check random resources
12:39  blip-: *concrete
12:39  VoVo64: blip-: you could write a stored procedure. but in this case doing it in one statement will be more efficient
12:41  VoVo64: blip-: the multi table UPDATE syntax is very similiar to the SELECT ... JOIN syntax. UPDATE T1 JOIN T2 ON ... SET T1.x=T2.y ...
12:41  Syniq: blip-: Better to do it on one statement.  Just stick the JOIN after the "UPDATE places" part.
12:42  Naktibalda: blip-: the last example in article
12:42  Syniq: If I'm writing UPDATE queries, I usually format them as SELECTs first to doubly make sure I'm hitting the right dataset.
12:42  blip-: VoVo64: oh I thought the multi-table is for writing to multiple tables
12:51  Syniq: Anyone know how to get MySQL Workbench to display the contents of a text field instead of that god damn incessant BLOB symbol?! >.<
12:51  Syniq: (Also, apparently you can't subquery SHOW and cast it as VARCHAR 2048. :( )
12:57  blip-: !m blip- update from
12:57  ubiquity: blip-: Sorry, I have no idea about that manual entry.
13:00  blip-: VoVo64, Naktibalda: got it.  works perfectly.  thanks for the hel.      UPDATE places INNER JOIN locations ON places.name=locations.name SET places.x=locations.x,places.y=locations.y;
13:00  blip-: *help
13:00  blip-: Syniq: thanks
13:00  _raymond_: UPDATEs without WHERE's make me uneasy...
13:02  stimpie: how do I cp/backup a not running mysql server? will copying /var/lib/mysql be sufficient?
13:04  Syniq: blip-: Welcome.
13:13  niravana: so guys, I want to SELECT all data from table with additional field which would tell if in other table there exists any records with id from primary table. I assume that I can't do join because that other table can have more then one record with specific ID?
13:15  _raymond_: niravana: read up about LEFT JOINs
13:15  Naktibalda: you can do GROUP BY first_table.id to avoid duplicates
13:16  Naktibalda: use COUNT() to count records found in another table
13:16  niravana: Naktibalda: group by good idea!
13:16  niravana: _raymond_: left join would be perfect, but i cant use LIMIT 1 in join syntax
13:17  _raymond_: niravana: eh?
13:17  niravana: as I said I can have more then one row with the same ID
13:17  VoVo64: Syniq: most stuff you can do with SHOW you can also get from information_schema
13:17  VoVo64: !tell Syniq about information_schema
13:17  ubiquity: Syniq: Information_Schema is a virtual database of databases inside of MySQL 5.0. You can use it to get schema, table and column metadata. Please note: It only shows information the user has access to.  For more info:  http://dev.mysql.com/doc/refman/5.1/en/information-schema.html
13:17  _raymond_: niravana: Do you always have at least one row?
13:17  niravana: _raymond_: i can have none or hundreds of them
13:17  niravana: but I am interested yo know if I have at least one
13:17  _raymond_: niravana: Then you must use a LEFT JOIN
13:17  niravana: to know*
13:17  _raymond_: niravana: Oh, ok.
13:18  _raymond_: then an INNER JOIN will filter out those which have none.
13:18  VoVo64: stimpie: in case mysql was shut down cleanly, and you also backup my.cnf - it can work. ideally you use mysqldump, though
13:19 * _raymond_ hands VoVo64 his 1.2T datadir and says "mysqldump away!"
13:19  niravana: _raymond_: but will return more then one row for these who have more then 1 record in second table
13:19  VoVo64: _raymond_: ok, come back in June
13:19  _raymond_: niravana: That is where the GROUP BY comes in as Naktibalda explained.
13:19  niravana: right
13:20  niravana: thanks! I have to check if this LEFT JOIN idea gives any performance boost over use of subquery to find that out
13:22  _raymond_: niravana: typically it does. But you don't need the LEFT JOIN as you said you don't want to see zero value results.
13:22  niravana: _raymond_: I want all records from table1 with additional field which gives 1 if there are any row in table2 or 0 - if there is none rows in table2
13:23  _raymond_: niravana: Ok, that's what I asked you before and you said " [13:17]  <niravana> but I am interested yo know if I have at least one"
13:23  niravana: right
13:23  _raymond_: niravana: It would be helpful if you could clearly articulate what it is you are looking for.
13:24  niravana: right
13:25  dr0id: niravana: heyo :)
13:36  Syniq: VoVo64: Bit late. :p
13:37  dyllan: I have 2 tables, they both have different names obviously but they have the same coloumn names. It is possible that the same result exsists in both tables in both columns, how can I write my MySQL Statement to check for that result?
13:52  niravana: SELECT l.reg_nr, count(*) AS dds FROM legal_persons l LEFT JOIN debts d ON (l.reg_nr=d.deb_reg_nr) GROUP BY l.reg_nr LIMIT 100;  <-- this is teribly slow. I guess group by operation runs on all input before i can do LIMIT on it
13:54  niravana: SELECT l.reg_nr as ll, EXISTS(SELECT d.deb_reg_nr FROM debts d WHERE ll=d.deb_reg_nr limit 1) AS dds FROM legal_persons l LIMIT 100; <-- this one at least retuns something in first 20 sec :)
13:54  niravana: this is till weird, why executing that subquery in PHP foreach() loop it gets data 10x faster then doing this subquery stuff
14:08 --- ccalender|away is now known as ccalender
14:13  thumbs: niravana: show the EXPLAIN for the first sql.
14:17  AlexC_: mornign
14:18  AlexC_: there is an application here using procedures, is it correct that I need to setup additional GRANTS on the 'mysql.proc' table?
14:19  niravana: thumbs: http://pastebin.com/CQhACezk
14:20  thumbs: niravana: the LEFT JOIN is pointless. You're not even referencing that table.
14:22  niravana: thumbs: what I want is to get all records from table1 with additional field which gives 1 if there are any row in table2 or 0 - if there is none rows in table2
14:23  thumbs: niravana: you're not selecting any column from table 2.
14:26  thumbs: niravana: so you don't need that LEFT JOIN.
14:27  niravana: thumbs: anyway
14:27  thumbs: niravana: anyway what?
14:27  bendbanks: hi all how go i check what the sql error is from the command line when a web page crashes out?
14:27  thumbs: !tell bendbanks about php error
14:27  ubiquity: bendbanks: $result=mysql_query($sql) or die("<br>some message about your code/script here: sql was ".$sql."<br>what mysql said:".mysql_error())
14:29  thumbs: bendbanks: you really ought to learn php basics. See the folks in ##php
14:29  guy: I have a table [id|client_id] and an array of IDs {1,2,3,4,5}; how do I write a query to check that every ID in the array belongs to client_id = 2?
14:29  guy: simply using a lot of AND?
14:29  thumbs: guy: write a loop in your favourite language.
14:30  guy: why not a lot of ANDs instead?
14:30  thumbs: guy: how would that work, exactly?
14:31  thumbs: guy: you'll need to run five queries
14:31  guy: ah. yarr. you are right. logic fault.
14:32  thumbs: guy: or a big union, and parse the output in your app
14:32  thumbs: guy: that may be a tad more efficient.
14:32  guy: like a lot of INNER JOINs you mean?
14:33  thumbs: guy: no. Did I say INNER JOINs?
14:33  soa2ii: If I want to dump and insert the dump directly can I do smth like "mysqldump -h host1 ... | mysql -h host2 ... ?
14:33  thumbs: guy: I said UNIONs
14:33  guy: I didn't know what UNION is until now.
14:33  thumbs: soa2ii: yes
14:33  thumbs: !m guy union
14:33  ubiquity: guy: See http://dev.mysql.com/doc/refman/5.1/en/union.html
14:35  guy: what is the most efficient SELECT when I don't actually need any data but just to check whether the records does exist?
14:36  thumbs: guy: yes, SELECT
14:36  guy: well, I can't just write SELECT  FROM
14:37  thumbs: guy: you must select a column, obviously.
14:37  thumbs: guy: in your case, client_id
14:38  guy: that wasn't the question
14:38  thumbs: !tell guy about tutorial
14:38  ubiquity: guy: MySQL Tutorial: http://dev.mysql.com/doc/refman/5.1/en/tutorial.html SQL Tutorials: http://www.sqlcourse.com  http://tut.php-quake.net/en/mysql.html and sqlzoo.net
14:38  thumbs: guy: yes it was. But you asked the wrong question.
14:39  guy: What is the most efficient select_expression when I don't need any actual data;
14:39  thumbs: guy: you need to select at least column.
14:39  thumbs: one column, that is
14:40  thumbs: GotSanity: COUNT(*) will do too.
14:43  MegaHerz: Hi all
14:44  MegaHerz: How to view SQL queries online as they come to mysql server? I'm on Linux
14:44  MegaHerz: I found some info on stackoverflow about certain GQL
