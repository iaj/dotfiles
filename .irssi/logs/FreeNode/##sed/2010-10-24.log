--- Log opened Sun Oct 24 00:00:09 2010
00:36  busker: say i have a file full of animals, and I would like to remove all the elephants from the file.  But I have a problem in that, if the zebras are left alone with the lions, they get eaten, the elephants are protecting the zebras. how could I do this with sed ?
--- Log closed Sun Oct 24 01:04:35 2010
--- Log opened Sun Oct 24 01:05:00 2010
01:05 --- Users 96 nicks [0 ops, 0 halfops, 0 voices, 96 normal]
01:06 --- Channel ##sed was synced in 113 seconds
01:09  ilab: busker: what does zebras being left alone with the lions mean precisely?
01:50 --- bLuCiFeR is now known as blu
--- Log closed Sun Oct 24 05:05:42 2010
--- Log opened Sun Oct 24 05:06:07 2010
05:06 --- Users 97 nicks [0 ops, 0 halfops, 0 voices, 97 normal]
05:07 --- Channel ##sed was synced in 109 seconds
05:54 --- highman is now known as barbanegra
--- Log closed Sun Oct 24 09:04:49 2010
--- Log opened Sun Oct 24 09:05:13 2010
09:05 --- Users 93 nicks [0 ops, 0 halfops, 0 voices, 93 normal]
09:06 --- Channel ##sed was synced in 110 seconds
11:21  paul_andrew: Hi, im trying to parse an html address and i would like to print everything after the last / so in this case it would be "http://www.foo.com/file.bar" would give me "file.bar". Any ideas how to solve it?
11:24  cthuluh: 4# address='http://www.foo.com/file.bar'; echo "${address##*/}"
11:24  shbot: cthuluh: file.bar
11:24  cthuluh: if you really want/have to use sed, there are ways to do it with sed too, of course
11:25  euedlg: sed -n 's/.*\/.*$/\1/p' will work for sed, I think
11:25  euedlg: er
11:25  euedlg: sed -n 's/.*\/\(.*$\)/\1/p' will work for sed, I think
11:25  euedlg: that is
11:26  cthuluh: or more simply    sed 's,.*/,,'   . it depends on the actual data
11:27  euedlg: er, yeah, whoops :(
11:31  paul_andrew: i dont know the best tool for this job, but it would be best if it was a oneliner. In this case its a deb file. http://dl.dropbox.com/u/364276/refreshx/deb/handbrakecli_20101023-1_i386.deb but it should work with all the links being used.
11:32  cthuluh: and then, what do you need the results (foo.bar) for?
11:33  will: paul_andrew: how do you get the path? from shell script?
11:34  paul_andrew: the path is set in a variable and being echoed like this: echo $HANDBRAKE | sed -n 's/.*\/\(.*$\)/\1/p'
11:34  will: :-D
11:35  cthuluh: 1) use more quotes. 2) don't use all upper-case shell variables. 3) don't use sed for this job
11:35  paul_andrew: cthuluh: :) what tool is best then, awk?
11:36  will: sh, bash, etc
11:36  cthuluh: just your shell standard features, as I showed you
11:37  paul_andrew: cthuluh: thanx, i didnt even know bash could do that. :)
11:39  paul_andrew: cthuluh: when should i use uppercase variables in script, only for paths?
11:39  cthuluh: paul_andrew: /msg greybot varcaps
11:40  paul_andrew: i mostly use it for everything just so i can easily seperate variables from the other code.
11:40  cthuluh: do you do the same in, say, Perl, or C? I doubt that :)
11:41  cthuluh: the problem is that you risk to override internal bash variables / important environmental variables
11:42  cthuluh: s/bash/shell since this is not bash specific
11:42  will: you may do that if you don't know your shell environment
11:42  paul_andrew: im not really a developer so even if i can declare variables i dont know the difference or importance of seperating upper and lowercase :)
11:42  will: it's all about convention
11:43  cthuluh: paul_andrew: internal / environmental variables name are uppercase, maybe this wasn't clear
11:43  cthuluh: anyway, if you have more questions about that, please ask #bash ;)
11:44  will: indeed
11:44  paul_andrew: Yes thank you so much for your help guys. i really appreciate your help.
12:17 --- cga_ is now known as cga
--- Log closed Sun Oct 24 13:04:55 2010
--- Log opened Sun Oct 24 13:05:24 2010
13:05 --- Users 96 nicks [0 ops, 0 halfops, 0 voices, 96 normal]
13:07 --- Channel ##sed was synced in 112 seconds
--- Log opened Sun Oct 24 14:30:23 2010
14:30 --- Users 96 nicks [0 ops, 0 halfops, 0 voices, 96 normal]
14:31 --- Channel ##sed was synced in 95 seconds
--- Log opened Sun Oct 24 15:08:12 2010
15:08 --- Users 97 nicks [0 ops, 0 halfops, 0 voices, 97 normal]
15:09 --- Channel ##sed was synced in 94 seconds
15:12  mechbangirc: hi i have several lines of sort: New York-Northern New Jersey-Long Island,NY-NJ-PA,49789,9 with variable number of cities and states i want New York,NY,49789,9 on one line then Northern New Jersey,NJ,49789,9 on second line and finally Long Island,PA,49789,9 on third line. any idea how it can be done?
15:13  waldner: are the items separated by "-" ?
15:14  waldner: ah, nm
15:14  waldner: to avoid a lot of pain, you better do that in awk
15:15  mechbangirc: waldner: yes cities and states both are separated by - and there is a , between cities and states
15:16  will: all in one line?
15:17  mechbangirc: several lines of such sort
15:18  mechbangirc: and worst part is variable number of cities and states for example some lines are already ok some with 2 cities 1 state some with 1 city with 2 states and so on
15:19  waldner: and what do you want to do in those cases=
15:19  waldner: how do you know which state goes with which city
15:19  will: you have to filter each line according to a pattern
15:20  mechbangirc: waldner: first city for first state, second city for second state. if there is only one state then all cities for one state. I want one city with corrosponding state on each line. Also two states can have same name city.
15:21  mechbangirc: it is such a mess
15:21  waldner: what if you have more ctates than cities?
15:21  waldner: er, cities than states
15:21  waldner: no, the other way round
15:21  waldner: more states than cities
15:22  will: can you paste bin a sample of your file to process?
15:22  waldner: in other words, c1-c2-c3,s1,s2 should result in c1,s1 c2,s2 and c3,s2?
15:22  mechbangirc: it will not be. only possiblity is that there would be more cities but only one state.
15:23  mechbangirc: wait i pastebin
15:25  mechbangirc: http://pastebin.com/UnKXk3uC it is a per capita income index of cities/states i think 2008 or 2010
--- Log closed Sun Oct 24 15:31:15 2010
--- Log opened Sun Oct 24 15:31:38 2010
15:31 --- Users 95 nicks [0 ops, 0 halfops, 0 voices, 95 normal]
15:31  mechbangirc: waldner: i do need to have some sort of lookup
15:32  will: if there's more cities than states you may copy the line and remove the wrong cities
15:32  waldner: sure, if you know which ones the wrong cities are, which you don't without a city-to-state lookup table
15:33 --- Channel ##sed was synced in 104 seconds
15:33  mechbangirc: ok if i for the time skip such lines and i do it manually. consider cities are not more than states
15:33  waldner: cities are not more than states. how do you know which city is in which state?
15:34  waldner: (or, which state to ignore)
15:35  mechbangirc: sorry more states than cities
15:35  will: one city cannot be in more than one state?
15:35  waldner: even then, it's not different
15:36  waldner: how do you know which cities to ignore, or to put in multiple states
15:36  mechbangirc: will: there are some cities with same names in multiple states. it is ok
15:37  will: but not on the same line right in your file right?
15:37  will: I think you may process each like recursively with labels
15:38  will: line*
15:38  mechbangirc: for example there is a logan name city in IA, OH, UT and WV
15:39  waldner: and ID, apparently
15:39  will: but in your file the logan name appear in different lines
15:40  mechbangirc: than those logans are for those states, if you notice last column is index number which increments on each line and second last column is per capita income $
15:41  will: i'm wrong logan appear on one line
15:41  will: with 2 states
15:41  will: :-D
15:41  will: who did this file?
15:41  will: it's pretty crappy
15:41  waldner: Huntington-Ashland,WV-KY-OH,27145,318
15:41  mechbangirc: MSA released it
15:42  waldner: that is the typical line that can't be processed without lookup
15:42  mechbangirc: it is such a crap seriously
15:42  waldner: and so is this: Kingsport-Bristol-Bristol,TN-VA,28222,290
15:43  waldner: Parkersburg-Marietta-Vienna,WV-OH,28285,286 too
15:43  will: the game is over
15:43  will: :-D
15:43  mechbangirc: honostly i did not take a good look on such possiblities
15:44  will: you can't guess how to reorder each lines
15:46  mechbangirc: i have a database of contacts i am trying to figure it out
15:49  mechbangirc: ok regarding Huntington-Ashland,WV-KY-OH,27145,318 Huntington is in WV and Ashland is in both KY and OH. i think first city is for first state and second for second state however last city is for remaining states
15:50  waldner: what about Parkersburg-Marietta-Vienna,WV-OH,28285,286 too
15:51  mechbangirc: Parkersburg is in only WV, Marietta is in OH and several others but not in WV, finally Vienna is in OH and also WV which put me in another dead end.
15:52  mechbangirc: i think it can not be done without lookup
15:52  waldner: it may be worth checking if it can be assumed that the list with less items can simply be extended with copies of the last item
15:53  waldner: in other words, whether Parkersburg-Marietta-Vienna,WV-OH,28285,286 can be considered the same as Parkersburg-Marietta-Vienna,WV-OH-OH,28285,286
15:53  waldner: and Huntington-Ashland,WV-KY-OH,27145,318 can be considered as Huntington-Ashland-Ashland,WV-KY-OH,27145,318
15:54  waldner: *iff* that holds true, then the assumption can be implemented in the code
15:54  waldner: but that's a bit if
15:54  waldner: *big
15:54  mechbangirc: waldner: Vienna appears in both WV and OH, i can not be sure for only OH
15:55  mechbangirc:  Huntington-Ashland-Ashland,WV-KY-OH,27145,318 assumption does make sense
15:58  waldner: I would expect that whoever wrote that file put some sort of logic like that in it, otherwise it'd be intractable
15:59  mechbangirc: there is a similar list here http://en.wikipedia.org/wiki/Table_of_United_States_Metropolitan_Statistical_Areas
16:00  mechbangirc: however this is based on population not per capita income
16:03  mechbangirc: the list i pastebin first (original) is here: http://www.city-data.com/forum/general-u-s/314570-us-metro-areas-ranked-per-capita.html
16:05  mechbangirc: waldner: your logic seems to be right. there is no other way atleast no any logical way.
16:06  mechbangirc: *other
16:07  waldner: try something like this:
16:07  waldner: awk -F, -v OFS=, '{nc=split($1,c,/-/);ns=split($2,s,/-/);if(nc<ns){for(i=nc+1;i<=ns;i++)c[i]=c[nc]}else{for(i=ns+1;i<=nc;i++)s[i]=s[ns]};max=nc>ns?nc:ns;for(i=1;i<=max;i++)print c[i],s[i],$3,$4}'
16:07  waldner: ok, the format is terrible
16:08  waldner: http://pastebin.com/k76nyMEt
16:09  mechbangirc: min
16:10  waldner: another way is awk -F, -v OFS=, '{nc=split($1,c,/-/);ns=split($2,s,/-/);max=nc>ns?nc:ns;for(i=1;i<=max;i++)print (c[i]?c[i]:c[nc]),(s[i]?s[i]:s[ns]),$3,$4}'
16:11  mechbangirc: you are awesome. it did the trick
16:11  mechbangirc: i used first one
16:12  mechbangirc: simply amazing, i thought i would have to do it in parts or manually.
16:12  waldner: it does print something like you wanted, but with the aforementioned asumption
16:12  waldner: if that is true, then you're done
16:12  mechbangirc: yes it prints exactly what i wanted thanks
16:12  mechbangirc: yes i am done
16:13  mechbangirc: thanks again bye bye
16:13  waldner: (if the file follows the logic we discussed!)
16:13  waldner: bye
--- Log closed Sun Oct 24 17:04:48 2010
--- Log opened Sun Oct 24 17:05:09 2010
17:05 --- Users 92 nicks [0 ops, 0 halfops, 0 voices, 92 normal]
17:06 --- Channel ##sed was synced in 105 seconds
19:43  mansour: I am trying to obtain the serial number for my disk drive using: hdparm -I /dev/sda | sed -n 's/Serial Number:\([ \t]*\)\(.*\)/\2/p'
19:44  mansour: I keep on getting a whitespace at the begining
19:45  mansour: any idea ?
19:45  yitz_: hdparm -I /dev/sda | awk '$1 $2 == "SerialNumber:"{print $3}'
19:46  mansour: yitz_: thank you.
19:46  yitz_: np
19:46  mansour: just another question, how do I know if awk is better for this job ?
19:47  yitz_: If you can solve it using awk using cleaner, simpler code
19:47  mansour: I mean, it happened to me many times. Trying to solve an issue with sed, starting small, and the expression gets bigger. finally I find that awk solves it easier
19:48  yitz_: awk is set up to handle fields for you
19:48  yitz_: sed doesn't do fields
19:48  mansour: I don't have awk in this case, as it's going to run on embedded system. But I think I can add awk. In some other cases I can't
19:48  yitz_: If you want to match/print a field, awk does that trivially
19:49  mansour: yitz_: thank you.
19:50  mansour: I haven't used this syntax with awk before, but I will read about it. I mean : awk '$1 $2 == "somefield:"
19:50  yitz_: That concats $1 and $2 then compares it to a string
19:51  mansour: yitz_: perfect, thank you a lot
--- Log closed Sun Oct 24 21:05:59 2010
--- Log opened Sun Oct 24 21:06:23 2010
21:06 --- Users 100 nicks [0 ops, 0 halfops, 0 voices, 100 normal]
21:08 --- Channel ##sed was synced in 106 seconds
21:24  dborba: hey fellas - having a little bit of problem when trying to replace something with multiple backslashes. getting "sed: -e expression #1, char 10: unterminated `s' command" for sed -e "s/\//\\\\\\\//g"
21:24  dborba: the idea is to replace a / with \\\/
21:24  waldner: sed 's_/_\\\\\\&_g'
21:26  dborba: excellent - thanks a bunch
21:26  waldner: np
--- Log closed Mon Oct 25 00:00:49 2010
